(this["webpackJsonpcrime-maps"]=this["webpackJsonpcrime-maps"]||[]).push([[0],{101:function(e,t,a){e.exports=a.p+"static/media/novosibirsk.f2328259.svg"},102:function(e,t,a){e.exports=a.p+"static/media/krasnoyarsk.0bba5569.svg"},104:function(e,t,a){e.exports=a.p+"static/media/user.ed058a81.svg"},105:function(e,t,a){e.exports=a.p+"static/media/car_theft.f15135e1.svg"},106:function(e,t,a){e.exports=a.p+"static/media/fire.4faaaf86.svg"},107:function(e,t,a){e.exports=a.p+"static/media/accident.75476a82.svg"},108:function(e,t,a){e.exports=a.p+"static/media/animal.80e28ec9.svg"},109:function(e,t,a){e.exports=a.p+"static/media/violence.4e158945.svg"},110:function(e,t,a){e.exports=a.p+"static/media/bad_services.78eacfc8.svg"},111:function(e,t,a){e.exports=a.p+"static/media/death.25eac115.svg"},112:function(e,t,a){e.exports=a.p+"static/media/dtp.741b1766.svg"},113:function(e,t,a){e.exports=a.p+"static/media/lost_man.9db9caf4.svg"},114:function(e,t,a){e.exports=a.p+"static/media/protest.a4a6d874.svg"},115:function(e,t,a){e.exports=a.p+"static/media/theft.2d127463.svg"},130:function(e,t,a){e.exports=a(159)},158:function(e,t,a){},159:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),i=a.n(c),o=a(38),s=a(22),l=a(19),u=a(223),d=a(50),m=a(201),p=a(219),g=a(161),f=a(218),b=a(220),E=a(221),v=a(225),h=a(36),O=a(229),x=a(95),C=a.n(x),N=a(16),k=a(193),j=a(96),y=a.n(j),w=a(97),I=a.n(w),T={novosibirsk:{backgroundImage:"url(".concat(y.a,")"),backgroundSize:"cover",backgroundRepeat:"no-repeat"},krasnoyarsk:{backgroundImage:"url(".concat(I.a,")"),backgroundSize:"cover",backgroundRepeat:"no-repeat"}},S=Object(k.a)((function(e){return Object(N.a)({},T,{root:{width:360,flexShrink:0},rootPaper:{width:360},header:{position:"relative",height:200},searchContainer:{display:"flex",justifyContent:"space-between",margin:e.spacing(3),padding:"5px 10px",backgroundColor:"#fff",borderRadius:2*e.shape.borderRadius,border:"1px solid #ccc"},search:{width:"86%"},darkBG:{paddingTop:1,height:"100%",backgroundColor:"rgba(0, 0, 0, .5)"}})})),_=a(46),U=a.n(_),L=a(61),D=a(196),R=a(198),B=a(28),M=Object(k.a)((function(e){return Object(B.a)({root:{display:"flex",alignItems:"center",overflowX:"hidden",margin:e.spacing(1)},cityName:{marginLeft:e.spacing(1),color:e.palette.text},emblemContainer:{display:"none"},grow:{flexGrow:1},changeCityButton:{color:e.palette.text}},e.breakpoints.up("md"),{root:{margin:e.spacing(3)},cityName:{color:"#fff"},emblemContainer:{display:"flex",justifyContent:"center",alignItems:"center",width:40,height:40,background:"#fff",borderRadius:"50%"},emblem:{height:30},changeCityButton:{color:"#fff"}})})),A=a(101),z=a.n(A),P=a(102),G=a.n(P),F={novosibirsk:z.a,krasnoyarsk:G.a};var Z=function(e){var t=e.fetchCities,a=e.setModal,c=e.loading,i=e.city,o=e.titleCity,s=M();return Object(n.useEffect)((function(){c&&t()}),[c,t]),r.a.createElement("div",{className:s.root},r.a.createElement("div",{className:s.emblemContainer},r.a.createElement("img",{className:s.emblem,src:F[o],alt:""})),r.a.createElement(L.a,{variant:"h6",className:s.cityName},i),r.a.createElement("div",{className:s.grow}),r.a.createElement(D.a,{onClick:function(){return a(!0)}},r.a.createElement(R.a,{className:s.changeCityButton})))},H=a(199),W="linear-gradient(45deg, #f64b11 30%, #ffbc00 90%)",Y=Object(k.a)((function(e){return{root:{marginTop:"auto"},link:{textDecoration:"none"},button:{borderRadius:0,color:"#f64b11",borderColor:"#f64b11",borderLeft:"none",borderRight:"none"}}}));var J=function(e){var t=Y();return r.a.createElement("div",{className:t.root},r.a.createElement(o.b,{to:"/sign-in",className:t.link},r.a.createElement(g.a,{variant:"outlined",size:"large",fullWidth:!0,className:t.button,startIcon:r.a.createElement(H.a,null)},"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f")))};var $=function(e){var t=e.selectedCity,a=e.loading,n=e.fetchCities,c=e.setModal,i=S();return r.a.createElement(v.a,{smDown:!0,implementation:"css"},r.a.createElement(h.a,{variant:"permanent",className:i.root,classes:{paper:i.rootPaper}},r.a.createElement("div",{className:C()(i.header,i[t.title])},r.a.createElement("div",{className:i.darkBG},r.a.createElement("div",{className:i.searchContainer},r.a.createElement("img",{src:U.a,alt:"",height:"35px"}),r.a.createElement(O.a,{className:i.search,placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e Crime Maps..."})),r.a.createElement(Z,{loading:a,fetchCities:n,setModal:c,titleCity:t.title,city:t.name}))),r.a.createElement(J,null)))},q=a(59),Q=a(228),X=a(202),K=a(203),V=Object(k.a)((function(e){return{openButton:{position:"absolute",top:e.spacing(1),left:e.spacing(1),zIndex:1e3},root:{width:"80%",zIndex:1001},header:{display:"flex",alignItems:"center",padding:e.spacing(2),paddingRight:e.spacing(0),background:W},title:{marginLeft:e.spacing(1),color:"#fff"},logo:{height:30},grow:{flexGrow:1},closeMenuButton:{color:"#fff"}}}));var ee=function(e){var t=e.loading,a=e.fetchCities,c=e.setModal,i=e.selectedCity,o=V(),s=Object(n.useState)(!1),l=Object(q.a)(s,2),u=l[0],d=l[1],p=function(e){return d(e)};return r.a.createElement(v.a,{mdUp:!0,implementation:"css"},r.a.createElement(m.a,{className:o.openButton,onClick:function(){return p(!0)}},r.a.createElement(X.a,null)),r.a.createElement(Q.a,{open:u,onOpen:function(){return p(!0)},onClose:function(){return p(!1)},className:o.root,classes:{paper:o.root}},r.a.createElement("div",{className:o.header},r.a.createElement("img",{src:U.a,alt:"",className:o.logo}),r.a.createElement(L.a,{variant:"h6",className:o.title},"Crime Maps"),r.a.createElement("div",{className:o.grow}),r.a.createElement(D.a,{className:o.closeMenuButton,onClick:function(){return p(!1)}},r.a.createElement(K.a,null))),r.a.createElement(Z,{loading:t,fetchCities:a,setModal:c,titleCity:i.title,city:i.name}),r.a.createElement(J,null)))},te=function(){return{type:"FETCH_CITIES"}},ae=function(e){return{type:"MODAL",isOpen:e}},ne=function(e){return{type:"ERROR",error:e}},re=function(e){return{type:"CHANGE_CITY",id:e}},ce=function(e){return{type:"CHANGE_SELECTED_CITY",id:e}};var ie=Object(s.c)((function(e){var t=e.cities;return{selectedCityId:t.selectedCity,citiesList:t.data,loading:t.loading}}),(function(e){return Object(l.b)({fetchCities:te,setModal:ae},e)}))((function(e){var t=e.fetchCities,a=e.setModal,n=e.selectedCityId,c=e.citiesList,i=e.loading,o=c.find((function(e){return e.id===n}));return r.a.createElement("nav",null,r.a.createElement($,{selectedCity:o,loading:i,fetchCities:t,setModal:a}),r.a.createElement(ee,{selectedCity:o,loading:i,fetchCities:t,setModal:a}))})),oe=a(227),se=a(230),le=a(204),ue=function(e,t){return{type:"CHANGE_COORDINATES",lat:e,lng:t}},de=function(e){return{type:"SET_ZOOM",zoom:e}},me=function(){return{type:"INCREMENT_ZOOM"}},pe=function(){return{type:"DECREMENT_ZOOM"}},ge=function(e){return{type:"OPEN_INCIDENT",incident:e}},fe=function(){return{type:"CLOSE_INCIDENT"}},be=a(29),Ee=a.n(be),ve=a(104),he=a.n(ve),Oe=a(105),xe=a.n(Oe),Ce=a(106),Ne=a.n(Ce),ke=a(107),je=a.n(ke),ye=a(108),we=a.n(ye),Ie=a(109),Te=a.n(Ie),Se=a(110),_e=a.n(Se),Ue=a(111),Le=a.n(Ue),De=a(112),Re=a.n(De),Be=a(113),Me=a.n(Be),Ae=a(114),ze=a.n(Ae),Pe=a(115),Ge=a.n(Pe);function Fe(e){var t;switch(e){case 0:t=xe.a;break;case 1:t=Ne.a;break;case 2:t=je.a;break;case 3:t=we.a;break;case 4:t=Te.a;break;case 5:t=_e.a;break;case 6:t=Le.a;break;case 7:t=Re.a;break;case 8:t=Me.a;break;case 9:t=ze.a;break;case 10:t=Ge.a;break;default:t=he.a}return new Ee.a.Icon({iconUrl:t,iconSize:new Ee.a.Point(40,60),iconAnchor:[20,60]})}var Ze=Object(s.c)((function(e){var t=e.map,a=e.geodata,n=e.incidents;return{lat:t.lat,lng:t.lng,zoom:t.zoom,geodata:a.geodata,incidents:n.data}}),(function(e){return Object(l.b)({changeCoordinates:ue,changeZoom:de,openIncident:ge},e)}))((function(e){var t=e.lat,a=e.lng,n=e.zoom,c=e.geodata,i=e.changeCoordinates,o=e.changeZoom,s=e.incidents,l=e.openIncident;return r.a.createElement(oe.a,{center:[t,a],zoom:n,maxZoom:17,minZoom:5,attributionControl:!0,zoomControl:!1,doubleClickZoom:!0,scrollWheelZoom:!0,dragging:!0,animate:!0,easeLinearity:.35,onDragEnd:function(e){var t=e.target.getCenter(),a=t.lat,n=t.lng;i(a,n)},onZoomEnd:function(e){return o(e.target.getZoom())}},r.a.createElement(se.a,{url:"http://{s}.tile.osm.org/{z}/{x}/{y}.png"}),c?r.a.createElement(le.a,{position:[c.coords.latitude,c.coords.longitude],icon:Fe()}):null,s.map((function(e){return r.a.createElement(le.a,{key:e.id,position:e.coords,icon:Fe(e.type),onClick:function(){return l(e)}})})))})),He=a(205),We=a(206),Ye=a(208),Je=a(210),$e=a(211),qe=a(212),Qe=a(213),Xe=a(215),Ke=a(207),Ve=a(209),et=a(214),tt=Object(k.a)((function(e){return{title:{position:"relative",backgroundColor:"#eee",borderBottom:"1px solid #cecece"},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1)},loadingText:{display:"flex",justifyContent:"center",alignItems:"center"},rotate:{animation:"$rotate 1s infinite"},"@keyframes rotate":{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(-360deg)"}},actions:{backgroundColor:"#eee",borderTop:"1px solid #cecece"}}}));var at=Object(s.c)((function(e){var t=e.cities;return{isOpen:t.isSelectorOpen,cities:t.data,loading:t.loading,error:t.error}}),(function(e){return Object(l.b)({setModal:ae,changeCity:re,changeCoordinates:ue},e)}))((function(e){var t=Object(n.useState)(null),a=Object(q.a)(t,2),c=a[0],i=a[1],o=tt(),l=e.isOpen,u=e.loading,d=e.setModal,m=e.cities,p=e.changeCity,f=e.changeCoordinates;return r.a.createElement(He.a,{open:l,onClose:function(){return d(!1)},maxWidth:"sm",fullWidth:!0},r.a.createElement(We.a,{className:o.title},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0433\u043e\u0440\u043e\u0434",r.a.createElement(D.a,{onClick:function(){return d(!1)},className:o.closeButton},r.a.createElement(Ke.a,null))),r.a.createElement(Ye.a,null,u&&r.a.createElement(L.a,{variant:"h6",color:"textSecondary",className:o.loadingText},"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0441\u043f\u0438\u0441\u043a\u0430 \u0433\u043e\u0440\u043e\u0434\u043e\u0432",r.a.createElement(Ve.a,{className:o.rotate})),!u&&r.a.createElement(Je.a,{component:"nav"},m.map((function(e){return r.a.createElement($e.a,{button:!0,key:e.id,selected:e.id===c,onClick:function(){return i(e.id)}},r.a.createElement(qe.a,null,e.name),e.id===c&&r.a.createElement(Qe.a,null,r.a.createElement(D.a,null,r.a.createElement(et.a,null))))})))),r.a.createElement(Xe.a,{className:o.actions},r.a.createElement(g.a,{onClick:function(){return function(e){var t=m.find((function(t){return t.id===e}));localStorage.setItem("selectedCity",e),Object(s.b)((function(){p(e),d(!1),f(t.lat,t.lng)}))}(c)},disabled:null===c},"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c")))})),nt=a(24),rt=a(200),ct=a(217),it=a(216),ot=Object(k.a)((function(e){return{titleContainer:{position:"relative",backgroundColor:"#eee",borderBottom:"1px solid #cecece"},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1)},infoContainer:{display:"flex",justifyContent:"space-between",marginBottom:e.spacing(1)},date:{color:"#aaa",cursor:"pointer","&:hover":{textDecoration:"underline"}},views:{display:"flex",alignItems:"center",color:"#aaa"},viewsIcon:{marginLeft:e.spacing(1)},sourcesContainer:{display:"flex",flexDirection:"column",marginTop:e.spacing(2)},sourceBorder:{marginBottom:e.spacing(1),borderBottom:"1px solid #cecece"}}}));var st=function(e){var t=e.close,a=e.incident,n=a.title,c=a.text,i=a.date,o=a.views,s=a.sources,l=ot(),u=function(e){var t=new Date(e),a=t.getDate(),n=t.getMonth()+1,r=t.getFullYear(),c=t.getHours(),i=t.getMinutes();return a<10&&(a="0"+a),n<10&&(n="0"+n),c<10&&(c="0"+c),i<10&&(i="0"+i),"".concat(c,":").concat(i," ").concat(a,".").concat(n,".").concat(r)}(i),d=Object(nt.a)(),m=Object(rt.a)(d.breakpoints.down("sm"));return r.a.createElement(He.a,{open:!0,onClose:t,maxWidth:"md",fullWidth:!0,fullScreen:m},r.a.createElement(We.a,{className:l.titleContainer},n,r.a.createElement(D.a,{onClick:t,className:l.closeButton},r.a.createElement(Ke.a,null))),r.a.createElement(Ye.a,null,r.a.createElement("div",{className:l.infoContainer},r.a.createElement(L.a,{variant:"body1",className:l.date},u),r.a.createElement(L.a,{variant:"body1",className:l.views},o," ",r.a.createElement(it.a,{className:l.viewsIcon}))),r.a.createElement(L.a,{variant:"body1"},c),r.a.createElement("div",{className:l.sourcesContainer},r.a.createElement(L.a,{variant:"h6"},"\u0418\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u0438:"),r.a.createElement("div",{className:l.sourceBorder}),s.map((function(e,t){return r.a.createElement(ct.a,{key:t,href:e.link},e.name)})))))},lt=Object(k.a)((function(e){return Object(B.a)({root:{display:"flex",height:"100%"},buttonUserPosition:{position:"absolute",bottom:e.spacing(1),right:e.spacing(1),zIndex:1e3},zoomButtonsContainer:{display:"flex",flexDirection:"column",position:"absolute",top:e.spacing(1),right:e.spacing(1),zIndex:1e3},buttonZoomOut:{marginTop:e.spacing(1)}},e.breakpoints.up("md"),{buttonUserPosition:{bottom:e.spacing(3),right:e.spacing(3)},zoomButtonsContainer:{top:e.spacing(3),right:e.spacing(3)},buttonZoomOut:{marginTop:e.spacing(1)}})})),ut=function(e){return{type:"FETCH_ALL_INCIDENTS",id:e}},dt=function(e){return{type:"SET_ERROR",error:e}};var mt=Object(s.c)((function(e){var t=e.geodata,a=e.map,n=e.incidents,r=e.cities,c=e.incident;return{geodata:t.geodata,zoom:a.zoom,loading:n.isLoading,selectedCityid:r.selectedCity,incident:c}}),(function(e){return Object(l.b)({changeCoordinates:ue,incrementZoom:me,decrementZoom:pe,fetchAllIncidents:ut,closeIncident:fe},e)}))((function(e){var t=e.changeCoordinates,a=e.geodata,c=e.incrementZoom,i=e.decrementZoom,o=e.zoom,s=e.fetchAllIncidents,l=e.loading,u=e.selectedCityid,d=e.incident,v=e.closeIncident,h=lt();return Object(n.useEffect)((function(){l&&s(u)}),[l,s,u]),r.a.createElement("div",{className:h.root},r.a.createElement(ie,null),r.a.createElement(Ze,null),r.a.createElement(at,null),r.a.createElement(m.a,{color:"primary",size:"large",className:h.buttonUserPosition,onClick:function(){return t(a.coords.latitude,a.coords.longitude)},disabled:null===a},r.a.createElement(f.a,null)),r.a.createElement("div",{className:h.zoomButtonsContainer},r.a.createElement(p.a,{orientation:"vertical"},r.a.createElement(g.a,{variant:"contained",onClick:function(){17!==o&&c()}},r.a.createElement(b.a,null)),r.a.createElement(g.a,{variant:"contained",onClick:function(){5!==o&&i()}},r.a.createElement(E.a,null)))),d&&r.a.createElement(st,{incident:d,close:v}))})),pt=a(162),gt=a(224),ft=a(226),bt=Object(k.a)((function(e){return Object(B.a)({root:{display:"flex",flexDirection:"column",height:"100%",background:"linear-gradient(45deg, #2196F3 30%, #21CBF3 90%)"},logoContainer:{display:"flex",justifyContent:"center",alignItems:"center",paddingTop:e.spacing(3),color:"#fff",textTransform:"uppercase"},logo:{marginLeft:e.spacing(1),height:30},paper:{marginTop:e.spacing(3),marginLeft:e.spacing(1),marginRight:e.spacing(1),paddingTop:e.spacing(1),paddingBottom:e.spacing(3)},title:{textAlign:"center",textTransform:"uppercase"},form:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)},textField:{marginTop:e.spacing(1),width:"100%"},button:{marginTop:e.spacing(3)},grayText:{marginTop:e.spacing(1),textAlign:"center",color:"#999"},link:{textDecoration:"none"},linkButton:{marginTop:e.spacing(1)},underContainer:{display:"flex",justifyContent:"center",marginTop:e.spacing(1)},backButton:{color:"#fff"}},e.breakpoints.up("sm"),{root:{alignItems:"center"},paper:{marginTop:e.spacing(10),width:e.breakpoints.width("sm")},form:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)},underContainer:{justifyContent:"flex-end",width:e.breakpoints.width("sm")}})}));function Et(e){var t=e.snackbar,a=bt(),c=Object(n.useState)({email:"",password:""}),i=Object(q.a)(c,2),s=i[0],l=i[1],u=function(e){var t=e.target;return l(Object(N.a)({},s,Object(B.a)({},t.name,t.value)))};return r.a.createElement("div",{className:a.root},r.a.createElement("div",{className:a.logoContainer},r.a.createElement(L.a,{variant:"h5"},"Crime Maps"),r.a.createElement("img",{src:U.a,alt:"",className:a.logo})),r.a.createElement(pt.a,{className:a.paper},r.a.createElement(L.a,{variant:"h6",className:a.title},"\u0412\u0445\u043e\u0434"),r.a.createElement("div",{className:a.form},r.a.createElement(gt.a,{name:"email",value:s.email,onChange:u,className:a.textField,label:"E-Mail"}),r.a.createElement(gt.a,{name:"password",value:s.password,type:"password",onChange:u,className:a.textField,label:"\u041f\u0430\u0440\u043e\u043b\u044c"}),r.a.createElement(g.a,{color:"primary",variant:"contained",size:"large",className:a.button,fullWidth:!0},"\u0412\u043e\u0439\u0442\u0438"),r.a.createElement(L.a,{variant:"body2",className:a.grayText},"\u0438\u043b\u0438"),r.a.createElement(o.b,{to:"/sign-up",className:a.link},r.a.createElement(g.a,{color:"secondary",variant:"contained",className:a.linkButton,fullWidth:!0},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")))),r.a.createElement("div",{className:a.underContainer},r.a.createElement(o.b,{to:"/",className:a.link},r.a.createElement(g.a,{className:a.backButton},"\u041d\u0430\u0437\u0430\u0434 \u043d\u0430 \u0441\u0430\u0439\u0442"))),r.a.createElement(ft.a,{open:!!t,message:t,anchorOrigin:{vertical:"bottom",horizontal:"left"}}))}Et.defaultProps={snackbar:""};var vt=Object(s.c)((function(e){return{snackbar:e.system.signInSnackbar}}))(Et),ht=a(116),Ot=a.n(ht),xt=Object(k.a)((function(e){return Object(B.a)({root:{display:"flex",flexDirection:"column",height:"100%",background:W},logoContainer:{display:"flex",justifyContent:"center",alignItems:"center",paddingTop:e.spacing(3),color:"#fff",textTransform:"uppercase"},logo:{marginLeft:e.spacing(1),height:30},paper:{marginTop:e.spacing(3),marginLeft:e.spacing(1),marginRight:e.spacing(1),paddingTop:e.spacing(1),paddingBottom:e.spacing(3)},title:{textAlign:"center",textTransform:"uppercase"},form:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)},textField:{marginTop:e.spacing(1),width:"100%"},button:{marginTop:e.spacing(3)},grayText:{marginTop:e.spacing(1),textAlign:"center",color:"#999"},link:{textDecoration:"none"},linkButton:{marginTop:e.spacing(1)},underContainer:{display:"flex",justifyContent:"center",marginTop:e.spacing(1)},backButton:{color:"#fff"}},e.breakpoints.up("sm"),{root:{alignItems:"center"},paper:{marginTop:e.spacing(10),width:e.breakpoints.width("sm")},form:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)},underContainer:{justifyContent:"flex-end",width:e.breakpoints.width("sm")}})})),Ct=function(e){return{type:"SIGN_UP_REQUEST",data:e}},Nt=function(e){return{type:"SIGN_UP_FAIL",data:e}},kt=function(e,t){return{type:"CHANGE_FIELD",name:e,value:t}},jt=/^\s*([0-9a-zA-Z\u0430-\u044f\u0410-\u042f]*)\s*$/,yt=/^\s*([0-9a-zA-Z]*)\s*$/;function wt(e){var t=e.snackbar,a=e.isButtonDisabled,n=e.requestSignUp,c=e.changeField,i=e.name,l=e.nameError,u=e.email,m=e.emailError,p=e.password,f=e.passwordError,b=e.redirect,E=xt();return r.a.createElement("div",{className:E.root},b&&r.a.createElement(d.a,{to:"/sign-in"}),r.a.createElement("div",{className:E.logoContainer},r.a.createElement(L.a,{variant:"h5"},"Crime Maps"),r.a.createElement("img",{src:U.a,alt:"",className:E.logo})),r.a.createElement(pt.a,{className:E.paper},r.a.createElement(L.a,{variant:"h6",className:E.title},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),r.a.createElement("div",{className:E.form},r.a.createElement(gt.a,{name:"name",value:i,onChange:function(e){var t=e.target;return Object(s.b)((function(){c("signUpName",t.value),c("signUpNameError","")}))},error:!!l,helperText:l,className:E.textField,label:"\u0418\u043c\u044f \u043d\u0430 \u0441\u0430\u0439\u0442\u0435"}),r.a.createElement(gt.a,{name:"email",value:u,onChange:function(e){var t=e.target;return Object(s.b)((function(){c("signUpEmail",t.value),c("signUpEmailError","")}))},error:!!m,helperText:m,className:E.textField,label:"E-Mail"}),r.a.createElement(gt.a,{name:"password",value:p,type:"password",onChange:function(e){var t=e.target;return Object(s.b)((function(){c("signUpPassword",t.value),c("signUpPasswordError","")}))},error:!!f,helperText:f,className:E.textField,label:"\u041f\u0430\u0440\u043e\u043b\u044c"}),r.a.createElement(g.a,{color:"primary",variant:"contained",size:"large",className:E.button,fullWidth:!0,onClick:function(){var e="",t="",a="";(!i||i.length<6||i.length>16)&&(e="\u0418\u043c\u044f \u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043e\u0442 6 \u0434\u043e 16 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432."),i.match(jt)||(e="\u0414\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b \u0442\u043e\u043b\u044c\u043a\u043e \u043b\u0430\u0442\u0438\u043d\u0441\u043a\u0438\u0435 \u0438 \u043a\u0438\u0440\u0438\u043b\u043b\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0441\u0438\u043c\u0432\u043e\u043b\u044b, \u0430 \u0442\u0430\u043a \u0436\u0435 \u0447\u0438\u0441\u043b\u0430."),Ot.a.validate(u)||(t="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 E-Mail."),(!p||p.length<6||p.length>16)&&(a="\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043e\u0442 6 \u0434\u043e 16 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432."),p.match(yt)||(a="\u0414\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b \u0442\u043e\u043b\u044c\u043a\u043e \u043b\u0430\u0442\u0438\u043d\u0441\u043a\u0438\u0435 \u0441\u0438\u043c\u0432\u043e\u043b\u044b \u0438 \u0447\u0438\u0441\u043b\u0430."),e||t||a?Object(s.b)((function(){c("signUpNameError",e),c("signUpEmailError",t),c("signUpPasswordError",a)})):n({name:i,email:u,password:p})},disabled:a},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"),r.a.createElement(L.a,{variant:"body2",className:E.grayText},"\u0423\u0436\u0435 \u0435\u0441\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442?"),r.a.createElement(o.b,{to:"/sign-in",className:E.link},r.a.createElement(g.a,{color:"secondary",variant:"contained",className:E.linkButton,fullWidth:!0},"\u0412\u043e\u0439\u0442\u0438")))),r.a.createElement("div",{className:E.underContainer},r.a.createElement(o.b,{to:"/",className:E.link},r.a.createElement(g.a,{className:E.backButton},"\u041d\u0430\u0437\u0430\u0434 \u043d\u0430 \u0441\u0430\u0439\u0442"))),r.a.createElement(ft.a,{open:!!t,message:t,anchorOrigin:{vertical:"bottom",horizontal:"left"}}))}wt.defaultProps={name:"",nameError:"",email:"",emailError:"",password:"",passwordError:"",isButtonDisabled:!1,redirect:!1};var It=Object(s.c)((function(e){var t=e.system,a=e.forms;return{snackbar:t.signUpSnackbar,redirect:t.signUpRedirectToSignIn,name:a.signUpName,nameError:a.signUpNameError,email:a.signUpEmail,emailError:a.signUpEmailError,password:a.signUpPassword,passwordError:a.signUpPasswordError,isButtonDisabled:a.signUpButtonDisabled}}),(function(e){return Object(l.b)({requestSignUp:Ct,changeField:kt},e)}))(wt),Tt=function(e){return{type:"SET_LOCATION",data:e}},St=function(e){return{type:"SET_LOCATION_ERROR",error:e}};var _t=Object(s.c)(null,(function(e){return Object(l.b)({setLocation:Tt,setLocationError:St},e)}))((function(e){var t=e.setLocation,a=e.setLocationError;return navigator.geolocation.getCurrentPosition(t,a),r.a.createElement(n.Fragment,null,r.a.createElement(u.a,null),r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/",component:mt}),r.a.createElement(d.b,{path:"/sign-in",component:vt}),r.a.createElement(d.b,{path:"/sign-up",component:It})))})),Ut=a(117),Lt={},Dt={},Rt={data:JSON.parse(localStorage.getItem("citiesList"))||[{_id:"5e8f0f4f8883b725cc275bad",id:1,title:"novosibirsk",name:"\u041d\u043e\u0432\u043e\u0441\u0438\u0431\u0438\u0440\u0441\u043a",lat:55.0415,lng:82.9346}],isSelectorOpen:!1,error:!1,loading:!0,selectedCity:+localStorage.getItem("selectedCity")||1};var Bt,Mt,At=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD":return Object(N.a)({},e,{data:t.cities});case"MODAL":return Object(N.a)({},e,{isSelectorOpen:t.isOpen});case"ERROR":return Object(N.a)({},e,{error:t.error});case"LOADING":return Object(N.a)({},e,{loading:t.loading});case"CHANGE_SELECTED_CITY":return Object(N.a)({},e,{selectedCity:t.id});default:return e}},zt=+JSON.parse(localStorage.getItem("selectedCity")),Pt=JSON.parse(localStorage.getItem("citiesList"));if(zt&&Pt){var Gt=Pt.find((function(e){return e.id===zt}));Bt=Gt.lat,Mt=Gt.lng}else Bt=55.0415,Mt=82.9346;var Ft={lat:Bt,lng:Mt,zoom:13},Zt={geodata:null,error:!1},Ht={isLoading:!0,data:[],error:!1},Wt=Object(l.c)({system:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_SYSTEM_FIELD":return Object(N.a)({},e,Object(B.a)({},t.name,t.value));default:return e}},forms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_FIELD":return Object(N.a)({},e,Object(B.a)({},t.name,t.value));default:return e}},cities:At,map:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ft,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_COORDINATES":return Object(N.a)({},e,{lat:t.lat,lng:t.lng});case"SET_ZOOM":return Object(N.a)({},e,{zoom:t.zoom});case"INCREMENT_ZOOM":return Object(N.a)({},e,{zoom:++e.zoom});case"DECREMENT_ZOOM":return Object(N.a)({},e,{zoom:--e.zoom});default:return e}},geodata:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LOCATION":return Object(N.a)({},e,{geodata:t.data});case"SET_LOCATION_ERROR":return Object(N.a)({},e,{error:!0});default:return e}},incidents:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ht,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_INCIDENTS":return Object(N.a)({},e,{data:t.incidents});case"SET_LOADING":return Object(N.a)({},e,{isLoading:!1});case"SET_ERROR":return Object(N.a)({},e,{error:t.error});default:return e}},incident:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"OPEN_INCIDENT":return Object(N.a)({},t.incident);case"CLOSE_INCIDENT":return null;default:return e}}}),Yt=a(18),Jt=a.n(Yt),$t=a(9),qt=a(57),Qt=a.n(qt),Xt=Jt.a.mark(ea),Kt=Jt.a.mark(ta),Vt=Jt.a.mark(aa);function ea(){var e,t;return Jt.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object($t.b)(Qt.a.get,"/api/cities/");case 3:return e=a.sent,t=e.data,localStorage.setItem("citiesList",JSON.stringify(t)),a.next=8,Object($t.d)({type:"ADD",cities:t});case 8:return a.next=10,Object($t.d)(ne(!1));case 10:return a.next=12,Object($t.d)({type:"LOADING",loading:!1});case 12:a.next=19;break;case 14:return a.prev=14,a.t0=a.catch(0),console.error(a.t0.message),a.next=19,Object($t.d)(ne(!0));case 19:case"end":return a.stop()}}),Xt,null,[[0,14]])}function ta(e){var t;return Jt.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=e.id,a.next=4,Object($t.d)(ut(t));case 4:return a.next=6,Object($t.d)(ce(t));case 6:a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.error(a.t0.message);case 11:case"end":return a.stop()}}),Kt,null,[[0,8]])}function aa(){return Jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object($t.g)("FETCH_CITIES",ea);case 2:return e.next=4,Object($t.g)("CHANGE_CITY",ta);case 4:case"end":return e.stop()}}),Vt)}var na=Jt.a.mark(ca),ra=Jt.a.mark(ia);function ca(e){var t,a,n,r,c,i,o;return Jt.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.id,s.prev=1,s.next=4,Object($t.e)((function(e){return{cities:e.cities.data}}));case 4:return a=s.sent,n=a.cities,r=n.find((function(e){return e.id===t})),c=r.title,s.next=9,Object($t.b)(Qt.a.get,"/api/incidents/".concat(c));case 9:return i=s.sent,o=i.data,s.next=13,Object($t.d)(dt(!1));case 13:return s.next=15,Object($t.d)({type:"SET_LOADING",value:!1});case 15:return s.next=17,Object($t.d)({type:"SET_INCIDENTS",incidents:o});case 17:s.next=24;break;case 19:return s.prev=19,s.t0=s.catch(1),console.error(s.t0.message),s.next=24,Object($t.d)(dt(!0));case 24:case"end":return s.stop()}}),na,null,[[1,19]])}function ia(){return Jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object($t.g)("FETCH_ALL_INCIDENTS",ca);case 2:case"end":return e.stop()}}),ra)}var oa=function(e,t){return{type:"CHANGE_SYSTEM_FIELD",name:e,value:t}},sa=Jt.a.mark(ma),la=Jt.a.mark(pa),ua=Jt.a.mark(ga),da=Jt.a.mark(fa);function ma(){var e,t,a,n,r;return Jt.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,Object($t.e)((function(e){return e.forms}));case 3:return e=c.sent,t=e.signUpName,a=e.signUpEmail,n=e.signUpPassword,c.next=9,Object($t.d)(oa("signUpSnackbar","\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043d\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f..."));case 9:return c.next=11,Object($t.d)(kt("signUpButtonDisabled",!0));case 11:return c.next=13,Object($t.b)(Qt.a.post,"/api/auth/sign-up",{name:t,email:a,password:n});case 13:if(201!==(r=c.sent).status){c.next=19;break}return c.next=17,Object($t.d)({type:"SIGN_UP_SUCCESS",data:r.data});case 17:c.next=21;break;case 19:return c.next=21,Object($t.d)(Nt(r.data));case 21:c.next=31;break;case 23:return c.prev=23,c.t0=c.catch(0),c.next=27,Object($t.d)(oa("signUpSnackbar","\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437."));case 27:return c.next=29,Object($t.c)(5e3);case 29:return c.next=31,Object($t.d)(oa("signUpSnackbar",""));case 31:return c.prev=31,c.next=34,Object($t.d)(kt("signUpButtonDisabled",!1));case 34:return c.finish(31);case 35:case"end":return c.stop()}}),sa,null,[[0,23,31,35]])}function pa(e){return Jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.data,t.next=3,Object($t.d)(oa("signUpSnackbar",""));case 3:return t.next=5,Object($t.d)(oa("signUpRedirectToSignIn",!0));case 5:return t.next=7,Object($t.d)(oa("signInSnackbar","\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430, \u043c\u043e\u0436\u0435\u0442\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f!"));case 7:return t.next=9,Object($t.d)(oa("signUpRedirectToSignIn",!1));case 9:return t.next=11,Object($t.c)(5e3);case 11:return t.next=13,Object($t.d)(oa("signInSnackbar",""));case 13:case"end":return t.stop()}}),la)}function ga(e){var t;return Jt.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if("name: lenght"!==(t=e.data)){a.next=6;break}return a.next=4,Object($t.d)(kt("signUpNameError","\u0418\u043c\u044f \u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043e\u0442 6 \u0434\u043e 16 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432."));case 4:a.next=34;break;case 6:if("name: invalid"!==t){a.next=11;break}return a.next=9,Object($t.d)(kt("signUpNameError","\u0414\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b \u0442\u043e\u043b\u044c\u043a\u043e \u043b\u0430\u0442\u0438\u043d\u0441\u043a\u0438\u0435 \u0438 \u043a\u0438\u0440\u0438\u043b\u043b\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0441\u0438\u043c\u0432\u043e\u043b\u044b, \u0430 \u0442\u0430\u043a \u0436\u0435 \u0447\u0438\u0441\u043b\u0430."));case 9:a.next=34;break;case 11:if("name: busy"!==t){a.next=16;break}return a.next=14,Object($t.d)(kt("signUpNameError","\u0418\u043c\u044f \u0437\u0430\u043d\u044f\u0442\u043e, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0434\u0440\u0443\u0433\u043e\u0435."));case 14:a.next=34;break;case 16:if("email: invalid"!==t){a.next=21;break}return a.next=19,Object($t.d)(kt("signUpEmailError","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 E-Mail."));case 19:a.next=34;break;case 21:if("email: busy"!==t){a.next=26;break}return a.next=24,Object($t.d)(kt("signUpEmailError","\u0423\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0439 E-Mail \u0443\u0436\u0435 \u0435\u0441\u0442\u044c \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0435. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f."));case 24:a.next=34;break;case 26:if("password: length"!==t){a.next=31;break}return a.next=29,Object($t.d)(kt("signUpPasswordError","\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043e\u0442 6 \u0434\u043e 16 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432."));case 29:a.next=34;break;case 31:if("password: invalid"!==t){a.next=34;break}return a.next=34,Object($t.d)(kt("signUpPasswordError","\u0414\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b \u0442\u043e\u043b\u044c\u043a\u043e \u043b\u0430\u0442\u0438\u043d\u0441\u043a\u0438\u0435 \u0441\u0438\u043c\u0432\u043e\u043b\u044b \u0438 \u0447\u0438\u0441\u043b\u0430."));case 34:return a.next=36,Object($t.d)(oa("signUpSnackbar",""));case 36:case"end":return a.stop()}}),ua)}function fa(){return Jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object($t.f)("SIGN_UP_REQUEST",ma);case 2:return e.next=4,Object($t.f)("SIGN_UP_SUCCESS",pa);case 4:return e.next=6,Object($t.f)("SIGN_UP_FAIL",ga);case 6:case"end":return e.stop()}}),da)}var ba=Jt.a.mark(Ea);function Ea(){return Jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object($t.a)([aa(),ia(),fa()]);case 2:case"end":return e.stop()}}),ba)}var va=Ea,ha=Object(Ut.a)(),Oa=Object(l.e)(Wt,Object(l.a)(ha));window.getState=Oa.getState,ha.run(va);var xa=Oa;a(158);i.a.render(r.a.createElement(o.a,null,r.a.createElement(s.a,{store:xa},r.a.createElement(_t,null))),document.getElementById("root"))},46:function(e,t,a){e.exports=a.p+"static/media/logo_dark.6ea33164.svg"},96:function(e,t,a){e.exports=a.p+"static/media/novosibirsk.3223fede.jpg"},97:function(e,t,a){e.exports=a.p+"static/media/krasnoyarsk.aaf9cd5c.jpg"}},[[130,1,2]]]);
//# sourceMappingURL=main.392de531.chunk.js.map