(this["webpackJsonpcrime-maps"]=this["webpackJsonpcrime-maps"]||[]).push([[0],{101:function(e,t,a){e.exports=a.p+"static/media/novosibirsk.3223fede.jpg"},102:function(e,t,a){e.exports=a.p+"static/media/krasnoyarsk.aaf9cd5c.jpg"},103:function(e,t,a){e.exports=a.p+"static/media/novosibirsk.f2328259.svg"},104:function(e,t,a){e.exports=a.p+"static/media/krasnoyarsk.0bba5569.svg"},106:function(e,t,a){e.exports=a.p+"static/media/car_theft.b572941a.svg"},107:function(e,t,a){e.exports=a.p+"static/media/fire.547e02c8.svg"},108:function(e,t,a){e.exports=a.p+"static/media/accident.af983432.svg"},109:function(e,t,a){e.exports=a.p+"static/media/animal.78439bea.svg"},110:function(e,t,a){e.exports=a.p+"static/media/violence.b089ef0f.svg"},111:function(e,t,a){e.exports=a.p+"static/media/bad_services.0beafc4d.svg"},112:function(e,t,a){e.exports=a.p+"static/media/death.0e042142.svg"},113:function(e,t,a){e.exports=a.p+"static/media/dtp.430d3fe4.svg"},114:function(e,t,a){e.exports=a.p+"static/media/lost_man.44949d7e.svg"},115:function(e,t,a){e.exports=a.p+"static/media/protest.9ffcd5b2.svg"},116:function(e,t,a){e.exports=a.p+"static/media/theft.0e89d87b.svg"},117:function(e,t,a){e.exports=a.p+"static/media/disaster.e2168d84.svg"},118:function(e,t,a){e.exports=a.p+"static/media/user.ed058a81.svg"},119:function(e,t,a){e.exports=a.p+"static/media/car_theft.f15135e1.svg"},120:function(e,t,a){e.exports=a.p+"static/media/fire.4faaaf86.svg"},121:function(e,t,a){e.exports=a.p+"static/media/accident.75476a82.svg"},122:function(e,t,a){e.exports=a.p+"static/media/animal.80e28ec9.svg"},123:function(e,t,a){e.exports=a.p+"static/media/violence.4e158945.svg"},124:function(e,t,a){e.exports=a.p+"static/media/bad_services.78eacfc8.svg"},125:function(e,t,a){e.exports=a.p+"static/media/death.25eac115.svg"},126:function(e,t,a){e.exports=a.p+"static/media/dtp.741b1766.svg"},127:function(e,t,a){e.exports=a.p+"static/media/lost_man.9db9caf4.svg"},128:function(e,t,a){e.exports=a.p+"static/media/protest.a4a6d874.svg"},129:function(e,t,a){e.exports=a.p+"static/media/theft.2d127463.svg"},140:function(e,t,a){e.exports=a(169)},168:function(e,t,a){},169:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),i=a.n(c),s=a(25),o=a(20),l=a(131),u=a(226),p=a(36),m=a(225),d=a(47),g=Object(n.createContext)(),b=function(e){return{type:"SET_LOCATION",data:e}},f=function(e){return{type:"SET_LOCATION_ERROR",error:e}},E=function(e,t){return{type:"CHANGE_COORDINATES",lat:e,lng:t}},h=function(e){return{type:"SET_ZOOM",zoom:e}},v=function(){return{type:"INCREMENT_ZOOM"}},x=function(){return{type:"DECREMENT_ZOOM"}},O=function(e){return{type:"CHANGE_NEWS_TYPES",typeNews:e}},y=function(e,t){return{type:"CHANGE_SYSTEM_FIELD",name:e,value:t}},k=function(e,t){return{type:"CHANGE_FIELD",name:e,value:t}},j=function(){return{type:"SIGN_IN_VALIDATE"}},w=function(e,t){return{type:"SIGN_IN_REQUEST",email:e,password:t}},N=function(e){return{type:"SIGN_IN_FAIL",message:e}},C=function(){return{type:"SIGN_UP_VALIDATE"}},I=function(e){return{type:"SIGN_UP_FAIL",message:e}},S=function(e){return{type:"SET_USER_DATA",data:e}},T=function(){return{type:"FETCH_NEWS"}},_=a(170),U=a(201),A="linear-gradient(45deg, #2196F3 30%, #21CBF3 90%)",D=Object(U.a)((function(e){return{root:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",background:A},link:{textDecoration:"none"}}}));var L=function(){var e=D();return r.a.createElement("div",{className:e.root},r.a.createElement(s.b,{to:"/map",className:e.link},r.a.createElement(_.a,{variant:"contained",color:"primary"},"\u041a \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044e")))},z=a(220),P=a(222),B=a(231),R=a(221),F=a(223),Z=a(224),G=a(229),M=a(215),W=a(217),H=a(218),V=a(23),J=a(15),Y=a(101),Q=a.n(Y),q=a(102),$=a.n(q),X={novosibirsk:{backgroundImage:"url(".concat(Q.a,")"),backgroundSize:"cover",backgroundRepeat:"no-repeat"},krasnoyarsk:{backgroundImage:"url(".concat($.a,")"),backgroundSize:"cover",backgroundRepeat:"no-repeat"}},K=Object(U.a)((function(e){return Object(V.a)({root:{display:"none"}},e.breakpoints.up("md"),Object(J.a)({},X,{root:{display:"block",width:330,flexShrink:0},rootPaper:{width:330},subscriptionsContainer:{marginTop:e.spacing(1)},subscriptionsLink:{display:"flex",alignItems:"center",marginLeft:e.spacing(2),paddingTop:e.spacing(1),paddingBottom:e.spacing(1),fontSize:e.typography.h6.fontSize,textDecoration:"none",color:e.palette.text.primary},subscriptionsIcon:{marginRight:e.spacing(1),fontSize:e.typography.h4.fontSize,color:"#f64b11"},authLink:{marginTop:"auto",textDecoration:"none",borderTop:"1px solid ".concat("#f64b11")},authButton:{color:"#f64b11"}}))})),ee=a(233),te=a(53),ae=a.n(te),ne=a(205),re=a(232),ce=a(208),ie=a(209),se=Object(U.a)((function(e){return Object(V.a)({root:{display:"flex",alignItems:"center",overflowX:"hidden",margin:e.spacing(1)},cityName:{marginLeft:e.spacing(1),color:e.palette.text},emblemContainer:{display:"none"},grow:{flexGrow:1},changeCityButton:{color:e.palette.text}},e.breakpoints.up("md"),{root:{margin:e.spacing(3)},cityName:{color:"#fff"},emblemContainer:{display:"flex",justifyContent:"center",alignItems:"center",width:40,height:40,background:"#fff",borderRadius:"50%"},emblem:{height:30},changeCityButton:{color:"#fff"}})})),oe=a(103),le=a.n(oe),ue=a(104),pe=a.n(ue),me={novosibirsk:le.a,krasnoyarsk:pe.a};var de=Object(o.c)((function(e){return{loading:e.cities.loading}}))((function(e){var t=e.titleCity,a=e.city,n=se();return r.a.createElement("div",{className:n.root},r.a.createElement("div",{className:n.emblemContainer},r.a.createElement("img",{className:n.emblem,src:me[t],alt:""})),r.a.createElement(ne.a,{variant:"h6",className:n.cityName},a),r.a.createElement("div",{className:n.grow}),r.a.createElement(re.a,{title:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0433\u043e\u0440\u043e\u0434"},r.a.createElement(ce.a,null,r.a.createElement(ie.a,{className:n.changeCityButton}))))})),ge=Object(U.a)((function(e){return Object(J.a)({},X,{header:{position:"relative",height:200},blackout:{paddingTop:1,height:"100%",backgroundColor:"rgba(0, 0, 0, .5)"},searchContainer:{display:"flex",justifyContent:"space-between",margin:e.spacing(3),padding:"5px 10px",backgroundColor:"#fff",borderRadius:2*e.shape.borderRadius,border:"1px solid #ccc"},search:{width:"86%"}})})),be=a(54),fe=a.n(be);var Ee=Object(o.c)((function(e){var t=e.cities;return{selectedCityId:t.selectedCityId,citiesList:t.data}}))((function(e){var t=e.selectedCityId,a=e.citiesList,n=ge(),c=a.find((function(e){return e.id===t}));return r.a.createElement("div",{className:ae()(n.root,n[c.title])},r.a.createElement("div",{className:n.blackout},r.a.createElement("div",{className:n.searchContainer},r.a.createElement("img",{src:fe.a,alt:"",height:"35px"}),r.a.createElement(ee.a,{className:n.search,placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e Crime Maps..."})),r.a.createElement(de,{titleCity:c.title,city:c.name})))})),he=a(46),ve=a(106),xe=a.n(ve),Oe=a(107),ye=a.n(Oe),ke=a(108),je=a.n(ke),we=a(109),Ne=a.n(we),Ce=a(110),Ie=a.n(Ce),Se=a(111),Te=a.n(Se),_e=a(112),Ue=a.n(_e),Ae=a(113),De=a.n(Ae),Le=a(114),ze=a.n(Le),Pe=a(115),Be=a.n(Pe),Re=a(116),Fe=a.n(Re),Ze=a(117),Ge=a.n(Ze),Me=[{type:9,name:"\u0410\u043a\u0446\u0438\u044f \u043f\u0440\u043e\u0442\u0435\u0441\u0442\u0430"},{type:7,name:"\u0414\u0422\u041f"},{type:3,name:"\u0416\u0438\u0432\u043e\u0442\u043d\u044b\u0435"},{type:10,name:"\u041a\u0440\u0430\u0436\u0430"},{type:4,name:"\u041d\u0430\u0441\u0438\u043b\u0438\u0435"},{type:2,name:"\u041d\u0435\u0441\u0447\u0430\u0441\u0442\u043d\u044b\u0439 \u0441\u043b\u0443\u0447\u0430\u0439"},{type:0,name:"\u0423\u0433\u043e\u043d"},{type:1,name:"\u041f\u043e\u0436\u0430\u0440"},{type:5,name:"\u041f\u043b\u043e\u0445\u0438\u0435 \u0443\u0441\u043b\u0443\u0433\u0438"},{type:8,name:"\u041f\u0440\u043e\u043f\u0430\u043b \u0447\u0435\u043b\u043e\u0432\u0435\u043a"},{type:6,name:"\u0421\u043c\u0435\u0440\u0442\u044c"},{type:11,name:"\u0421\u0442\u0438\u0445\u0438\u0439\u043d\u043e\u0435 \u0431\u0435\u0434\u0441\u0442\u0432\u0438\u0435"}];var We=function(e){switch(e){case 0:return xe.a;case 1:return ye.a;case 2:return je.a;case 3:return Ne.a;case 4:return Ie.a;case 5:return Te.a;case 6:return Ue.a;case 7:return De.a;case 8:return ze.a;case 9:return Be.a;case 10:return Fe.a;case 11:return Ge.a;default:return!1}},He=Object(U.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",margin:e.spacing(1)},button:{display:"flex",flexDirection:"column",alignItems:"center",width:"24%",border:"none",background:"none",outline:"none",cursor:"pointer",transition:".3s","&:hover":{opacity:.7}},imageContainer:{padding:1.5*e.spacing(1),width:"100%",background:"#000",borderRadius:"50%"},label:{marginTop:e.spacing(1),fontSize:12},active:{background:"#f64b11"}}}));var Ve=Object(o.c)((function(e){return{types:e.map.showTypes}}))((function(e){var t=e.types,a=He(),c=Object(n.useContext)(g).changeNewsTypes,i=JSON.parse(localStorage.getItem("activeTypes"))||t;return r.a.createElement("div",{className:a.root},Me.map((function(e){return r.a.createElement("button",{className:a.button,key:e.name,onClick:function(){return function(e){var t,a=i.find((function(t){return t.type===e.type}));t=a?i.filter((function(e){return e.type!==a.type})):[].concat(Object(he.a)(i),[e]),localStorage.setItem("activeTypes",JSON.stringify(t)),c(e.type)}(e)}},r.a.createElement("div",{className:ae()(a.imageContainer,Object(V.a)({},a.active,(t=e.type,!!i.find((function(e){return e.type===t})))))},r.a.createElement("img",{alt:e.name,src:We(e.type),width:"100%"})),r.a.createElement("span",{className:a.label},e.name));var t})))})),Je=a(210),Ye=a(211),Qe=a(212),qe=a(213),$e=a(214),Xe=Object(U.a)((function(e){return{root:{width:"100%",position:"absolute",bottom:0},buttonsContainer:{display:"flex",justifyContent:"space-between"},button:{minWidth:0},active:{color:"#f64b11"}}})),Ke=[{path:"/cabinet",icon:r.a.createElement(Je.a,null)},{path:"/map/tape",icon:r.a.createElement(Ye.a,null)},{path:"/map",icon:r.a.createElement(Qe.a,null)},{path:"/map/recommendations",icon:r.a.createElement(qe.a,null)},{path:"/cabinet/gossip",icon:r.a.createElement($e.a,null)}];var et=function(e){var t=e.location,a=Xe();return r.a.createElement("div",{className:a.root},r.a.createElement(M.a,null),r.a.createElement("div",{className:a.buttonsContainer},Ke.map((function(e,n){return r.a.createElement(s.b,{key:n,to:e.path},r.a.createElement(ce.a,{className:ae()(Object(V.a)({},a.active,t===e.path))},e.icon))}))))};var tt=Object(o.c)((function(e){return{isAuth:e.user.isAuth}}))((function(e){var t=e.location,a=e.isAuth,n=K();return r.a.createElement(G.a,{variant:"permanent",className:n.root,classes:{paper:n.rootPaper}},r.a.createElement(Ee,null),r.a.createElement(Ve,null),a&&r.a.createElement("div",{className:n.subscriptionsContainer},r.a.createElement(M.a,null),r.a.createElement(s.b,{to:"/map/subscriptions",className:n.subscriptionsLink},r.a.createElement(W.a,{className:n.subscriptionsIcon})," \u041f\u043e\u0434\u043f\u0438\u0441\u043a\u0438"),r.a.createElement(M.a,null)),a&&r.a.createElement(et,{location:t.pathname}),!a&&r.a.createElement(s.b,{to:"/sign-in",className:n.authLink},r.a.createElement(_.a,{className:n.authButton,fullWidth:!0},r.a.createElement(H.a,null),"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f")))})),at=a(230),nt=a(234),rt=a(219),ct=a(26),it=a.n(ct),st=a(118),ot=a.n(st),lt=a(119),ut=a.n(lt),pt=a(120),mt=a.n(pt),dt=a(121),gt=a.n(dt),bt=a(122),ft=a.n(bt),Et=a(123),ht=a.n(Et),vt=a(124),xt=a.n(vt),Ot=a(125),yt=a.n(Ot),kt=a(126),jt=a.n(kt),wt=a(127),Nt=a.n(wt),Ct=a(128),It=a.n(Ct),St=a(129),Tt=a.n(St);function _t(e){var t;switch(e){case 0:t=ut.a;break;case 1:t=mt.a;break;case 2:t=gt.a;break;case 3:t=ft.a;break;case 4:t=ht.a;break;case 5:t=xt.a;break;case 6:t=yt.a;break;case 7:t=jt.a;break;case 8:t=Nt.a;break;case 9:t=It.a;break;case 10:t=Tt.a;break;default:t=ot.a}return new it.a.Icon({iconUrl:t,iconSize:new it.a.Point(30,60),iconAnchor:[15,60]})}var Ut=Object(o.c)((function(e){var t=e.map,a=e.news;return{lat:t.lat,lng:t.lng,zoom:t.zoom,geodata:t.geodata,showTypes:t.showTypes,news:a}}))((function(e){var t=e.lat,a=e.lng,c=e.zoom,i=e.geodata,s=e.news,o=e.showTypes,l=[];o.forEach((function(e){var t=e.type;return s.forEach((function(e){t===e.type&&l.push(e)}))}));var u=Object(n.useContext)(g),p=u.changeZoom,m=u.changeCoordinates;return r.a.createElement(at.a,{center:[t,a],zoom:c,maxZoom:17,minZoom:5,attributionControl:!0,zoomControl:!1,doubleClickZoom:!0,scrollWheelZoom:!0,dragging:!0,animate:!0,easeLinearity:.35,onDragEnd:function(e){var t=e.target.getCenter(),a=t.lat,n=t.lng;m(a,n)},onZoomEnd:function(e){return p(e.target.getZoom())}},r.a.createElement(nt.a,{url:"http://{s}.tile.osm.org/{z}/{x}/{y}.png"}),i&&r.a.createElement(rt.a,{position:[i.coords.latitude,i.coords.longitude],icon:_t()}),l.map((function(e){return r.a.createElement(rt.a,{key:e.id,position:e.coords,icon:_t(e.type),onClick:function(){return console.log(e)}})})))})),At=Object(U.a)((function(e){return Object(V.a)({root:{display:"flex",height:"100%"},buttonUserPosition:{position:"absolute",bottom:e.spacing(1),right:e.spacing(1),zIndex:1e3},zoomButtonsContainer:{display:"flex",flexDirection:"column",position:"absolute",top:e.spacing(1),right:e.spacing(1),zIndex:1e3},buttonZoomOut:{marginTop:e.spacing(1)}},e.breakpoints.up("md"),{buttonUserPosition:{bottom:e.spacing(3),right:e.spacing(3)},zoomButtonsContainer:{top:e.spacing(3),right:e.spacing(3)},buttonZoomOut:{marginTop:e.spacing(1)}})}));function Dt(e){var t=e.geodata,a=e.zoom,c=e.location,i=e.snackbar,s=At(),l=Object(n.useContext)(g),u=l.changeCoordinates,p=l.changeZoom,m=l.incrementZoom,d=l.decrementZoom,b=l.fetchNews;return Object(n.useEffect)((function(){b()}),[b]),r.a.createElement("div",{className:s.root},r.a.createElement(tt,{location:c}),r.a.createElement(z.a,{color:"primary",size:"large",className:s.buttonUserPosition,disabled:null===t,onClick:function(){return Object(o.b)((function(){u(t.coords.latitude,t.coords.longitude),p(16)}))}},r.a.createElement(R.a,null)),r.a.createElement("div",{className:s.zoomButtonsContainer},r.a.createElement(P.a,{orientation:"vertical"},r.a.createElement(_.a,{variant:"contained",onClick:function(){17!==a&&m()}},r.a.createElement(F.a,null)),r.a.createElement(_.a,{variant:"contained",onClick:function(){5!==a&&d()}},r.a.createElement(Z.a,null)))),r.a.createElement(Ut,null),r.a.createElement(B.a,{open:!!i,message:i,anchorOrigin:{vertical:"top",horizontal:"center"}}))}Dt.defaultProps={snackbar:""};var Lt=Object(o.c)((function(e){var t=e.map,a=e.system;return{geodata:t.geodata,zoom:t.zoom,snackbar:a.newsFetchSnackbar}}))(Dt),zt=a(216),Pt=a(227),Bt=Object(U.a)((function(e){return Object(V.a)({root:{display:"flex",flexDirection:"column",minHeight:"100%",background:A},logoContainer:{display:"flex",justifyContent:"center",alignItems:"center",paddingTop:e.spacing(3),color:"#fff",textTransform:"uppercase"},logo:{marginLeft:e.spacing(1),height:30},paper:{marginTop:e.spacing(3),marginLeft:e.spacing(1),marginRight:e.spacing(1),paddingTop:e.spacing(1),paddingBottom:e.spacing(3)},title:{textAlign:"center",textTransform:"uppercase"},form:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)},textField:{marginTop:e.spacing(1),width:"100%"},button:{marginTop:e.spacing(3)},grayText:{marginTop:e.spacing(1),textAlign:"center",color:"#999"},link:{textDecoration:"none"},linkButton:{marginTop:e.spacing(1)},underContainer:{display:"flex",justifyContent:"center",marginTop:e.spacing(1)},backButton:{color:"#fff"}},e.breakpoints.up("sm"),{root:{alignItems:"center"},paper:{marginTop:e.spacing(10),width:e.breakpoints.width("sm")},form:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)},underContainer:{justifyContent:"flex-end",width:e.breakpoints.width("sm")}})}));function Rt(e){var t=e.isAuth,a=e.snackbar,c=e.email,i=e.emailError,l=e.password,u=e.passwordError,p=e.isDisabled,m=Object(n.useContext)(g),b=m.changeField,f=m.signInValidate,E=Bt(),h=function(e){var t=e.target;return Object(o.b)((function(){b(t.name,t.value),b(t.name+"Error","")}))};return t?r.a.createElement(d.a,{to:"/map"}):r.a.createElement("div",{className:E.root},r.a.createElement("div",{className:E.logoContainer},r.a.createElement(ne.a,{variant:"h5"},"Crime Maps"),r.a.createElement("img",{src:fe.a,alt:"",className:E.logo})),r.a.createElement(zt.a,{className:E.paper},r.a.createElement(ne.a,{variant:"h6",className:E.title},"\u0412\u0445\u043e\u0434"),r.a.createElement("div",{className:E.form},r.a.createElement(Pt.a,{name:"signInEmail",value:c,error:!!i,helperText:i,onChange:h,className:E.textField,label:"E-Mail"}),r.a.createElement(Pt.a,{name:"signInPassword",value:l,error:!!u,helperText:u,type:"password",onChange:h,className:E.textField,label:"\u041f\u0430\u0440\u043e\u043b\u044c"}),r.a.createElement(_.a,{color:"primary",variant:"contained",size:"large",className:E.button,fullWidth:!0,onClick:f,disabled:p},"\u0412\u043e\u0439\u0442\u0438"),r.a.createElement(ne.a,{variant:"body2",className:E.grayText},"\u0438\u043b\u0438"),r.a.createElement(s.b,{to:"/sign-up",className:E.link},r.a.createElement(_.a,{color:"secondary",variant:"contained",className:E.linkButton,fullWidth:!0},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")))),r.a.createElement("div",{className:E.underContainer},r.a.createElement(s.b,{to:"/map",className:E.link},r.a.createElement(_.a,{className:E.backButton},"\u041d\u0430\u0437\u0430\u0434 \u043d\u0430 \u0441\u0430\u0439\u0442"))),r.a.createElement(B.a,{open:!!a,message:a,anchorOrigin:{vertical:"bottom",horizontal:"left"}}))}Rt.defaultProps={snackbar:"",email:"",emailError:"",password:"",passwordError:"",isDisabled:!1};var Ft=Object(o.c)((function(e){var t=e.user,a=e.forms,n=e.system;return{isAuth:t.isAuth,email:a.signInEmail,emailError:a.signInEmailError,password:a.signInPassword,passwordError:a.signInPasswordError,isDisabled:a.signInButtonDisabled,snackbar:n.signInSnackbar}}))(Rt),Zt=Object(U.a)((function(e){return Object(V.a)({root:{display:"flex",flexDirection:"column",minHeight:"100%",background:"linear-gradient(45deg, #f64b11 30%, #ffbc00 90%)"},logoContainer:{display:"flex",justifyContent:"center",alignItems:"center",paddingTop:e.spacing(3),color:"#fff",textTransform:"uppercase"},logo:{marginLeft:e.spacing(1),height:30},paper:{marginTop:e.spacing(3),marginLeft:e.spacing(1),marginRight:e.spacing(1),paddingTop:e.spacing(1),paddingBottom:e.spacing(3)},title:{textAlign:"center",textTransform:"uppercase"},form:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)},textField:{marginTop:e.spacing(1),width:"100%"},button:{marginTop:e.spacing(3)},grayText:{marginTop:e.spacing(1),textAlign:"center",color:"#999"},link:{textDecoration:"none"},linkButton:{marginTop:e.spacing(1)},underContainer:{display:"flex",justifyContent:"center",marginTop:e.spacing(1)},backButton:{color:"#fff"}},e.breakpoints.up("sm"),{root:{alignItems:"center"},paper:{marginTop:e.spacing(10),width:e.breakpoints.width("sm")},form:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)},underContainer:{justifyContent:"flex-end",width:e.breakpoints.width("sm")}})}));function Gt(e){var t=e.snackbar,a=e.isButtonDisabled,c=e.name,i=e.nameError,l=e.email,u=e.emailError,p=e.password,m=e.passwordError,b=e.isAuth,f=Object(n.useContext)(g),E=f.changeField,h=f.signUpValidate,v=Zt(),x=function(e){var t=e.target;return Object(o.b)((function(){E(t.name,t.value),E(t.name+"Error","")}))};return b?r.a.createElement(d.a,{to:"/map"}):r.a.createElement("div",{className:v.root},r.a.createElement("div",{className:v.logoContainer},r.a.createElement(ne.a,{variant:"h5"},"Crime Maps"),r.a.createElement("img",{src:fe.a,alt:"",className:v.logo})),r.a.createElement(zt.a,{className:v.paper},r.a.createElement(ne.a,{variant:"h6",className:v.title},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),r.a.createElement("div",{className:v.form},r.a.createElement(Pt.a,{name:"signUpName",value:c,onChange:x,error:!!i,helperText:i,className:v.textField,label:"\u0418\u043c\u044f \u043d\u0430 \u0441\u0430\u0439\u0442\u0435"}),r.a.createElement(Pt.a,{name:"signUpEmail",value:l,onChange:x,error:!!u,helperText:u,className:v.textField,label:"E-Mail"}),r.a.createElement(Pt.a,{name:"signUpPassword",value:p,type:"password",onChange:x,error:!!m,helperText:m,className:v.textField,label:"\u041f\u0430\u0440\u043e\u043b\u044c"}),r.a.createElement(_.a,{color:"primary",variant:"contained",size:"large",className:v.button,fullWidth:!0,onClick:h,disabled:a},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"),r.a.createElement(ne.a,{variant:"body2",className:v.grayText},"\u0423\u0436\u0435 \u0435\u0441\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442?"),r.a.createElement(s.b,{to:"/sign-in",className:v.link},r.a.createElement(_.a,{color:"secondary",variant:"contained",className:v.linkButton,fullWidth:!0},"\u0412\u043e\u0439\u0442\u0438")))),r.a.createElement("div",{className:v.underContainer},r.a.createElement(s.b,{to:"/map",className:v.link},r.a.createElement(_.a,{className:v.backButton},"\u041d\u0430\u0437\u0430\u0434 \u043d\u0430 \u0441\u0430\u0439\u0442"))),r.a.createElement(B.a,{open:!!t,message:t,anchorOrigin:{vertical:"bottom",horizontal:"left"}}))}Gt.defaultProps={name:"",nameError:"",email:"",emailError:"",password:"",passwordError:"",isButtonDisabled:!1};var Mt=Object(o.c)((function(e){var t=e.system,a=e.forms,n=e.user;return{snackbar:t.signUpSnackbar,name:a.signUpName,nameError:a.signUpNameError,email:a.signUpEmail,emailError:a.signUpEmailError,password:a.signUpPassword,passwordError:a.signUpPasswordError,isButtonDisabled:a.signUpButtonDisabled,isAuth:n.isAuth}}))(Gt);var Wt,Ht,Vt=Object(o.c)(null,(function(e){return Object(p.b)({setLocation:b,setLocationError:f,changeCoordinates:E,changeZoom:h,incrementZoom:v,decrementZoom:x,changeNewsTypes:O,changeSystemField:y,changeField:k,signInValidate:j,signUpValidate:C,fetchNews:T},e)}))((function(e){var t=e.setLocation,a=e.setLocationError,n={changeCoordinates:e.changeCoordinates,changeZoom:e.changeZoom,incrementZoom:e.incrementZoom,decrementZoom:e.decrementZoom,changeNewsTypes:e.changeNewsTypes,changeSystemField:e.changeSystemField,changeField:e.changeField,signInValidate:e.signInValidate,signUpValidate:e.signUpValidate,fetchNews:e.fetchNews};return navigator.geolocation.getCurrentPosition(t,a),r.a.createElement(g.Provider,{value:n},r.a.createElement(m.a,null),r.a.createElement(d.d,null,r.a.createElement(d.b,{path:"/",exact:!0,component:L}),r.a.createElement(d.b,{path:"/map",component:Lt}),r.a.createElement(d.b,{path:"/sign-in",exact:!0,component:Ft}),r.a.createElement(d.b,{path:"/sign-up",exact:!0,component:Mt})))})),Jt=a(132),Yt=+JSON.parse(localStorage.getItem("selectedCity")),Qt=JSON.parse(localStorage.getItem("citiesList"));if(Yt&&Qt){var qt=Qt.find((function(e){return e.id===Yt}));Wt=qt.lat,Ht=qt.lng}else Wt=55.0415,Ht=82.9346;var $t={geodata:null,geodataError:!1,lat:Wt,lng:Ht,zoom:13,showTypes:Object(he.a)(Me)},Xt={data:JSON.parse(localStorage.getItem("citiesList"))||[{_id:"5e8f0f4f8883b725cc275bad",id:1,title:"novosibirsk",name:"\u041d\u043e\u0432\u043e\u0441\u0438\u0431\u0438\u0440\u0441\u043a",lat:55.0415,lng:82.9346}],isSelectorOpen:!1,error:!1,loading:!0,selectedCityId:+localStorage.getItem("selectedCity")||1};var Kt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD":return Object(J.a)({},e,{data:t.cities});case"MODAL":return Object(J.a)({},e,{isSelectorOpen:t.isOpen});case"ERROR":return Object(J.a)({},e,{error:t.error});case"LOADING":return Object(J.a)({},e,{loading:t.loading});case"CHANGE_SELECTED_CITY":return Object(J.a)({},e,{selectedCityId:t.id});default:return e}},ea=a(130),ta={isAuth:!!a.n(ea).a.get("token")},aa={},na={},ra=[],ca=Object(p.c)({map:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LOCATION":return Object(J.a)({},e,{geodata:t.data});case"SET_LOCATION_ERROR":return Object(J.a)({},e,{error:!0});case"CHANGE_COORDINATES":return Object(J.a)({},e,{lat:t.lat,lng:t.lng});case"SET_ZOOM":return Object(J.a)({},e,{zoom:t.zoom});case"INCREMENT_ZOOM":return Object(J.a)({},e,{zoom:e.zoom+1});case"DECREMENT_ZOOM":return Object(J.a)({},e,{zoom:e.zoom-1});case"CHANGE_NEWS_TYPES":var a=e.showTypes.find((function(e){return e.type===t.typeNews}));if(a)return Object(J.a)({},e,{showTypes:e.showTypes.filter((function(e){return e.type!==t.typeNews}))});var n=Me.find((function(e){return e.type===t.typeNews}));return Object(J.a)({},e,{showTypes:[].concat(Object(he.a)(e.showTypes),[n])});default:return e}},cities:Kt,user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ta,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_DATA":return Object(J.a)({},e,{},t.data,{isAuth:!0});default:return e}},system:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:aa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_SYSTEM_FIELD":return Object(J.a)({},e,Object(V.a)({},t.name,t.value));default:return e}},forms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:na,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_FIELD":return Object(J.a)({},e,Object(V.a)({},t.name,t.value));default:return e}},news:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ra,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NEWS":return[].concat(Object(he.a)(e),Object(he.a)(t.news));default:return e}}}),ia=a(10),sa=a.n(ia),oa=a(5),la=a(70),ua=a.n(la),pa=/^\s*([0-9a-zA-Z\u0430-\u044f\u0410-\u042f]*)\s*$/,ma=/^\s*([0-9a-zA-Z]*)\s*$/,da=sa.a.mark(ga);function ga(){var e,t,a,n,r,c;return sa.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(oa.f)((function(e){var t=e.forms;return{email:t.signInEmail,emailError:t.signInEmailError,password:t.signInPassword,passwordError:t.signInPasswordError}}));case 2:if(e=i.sent,t=e.email,a=e.emailError,n=e.password,r=e.passwordError,c=!1,!a&&!r){i.next=11;break}return i.next=11,Object(oa.c)();case 11:return i.next=13,Object(oa.e)(k("signInButtonDisabled",!0));case 13:if(ua.a.validate(t)){i.next=17;break}return i.next=16,Object(oa.e)(k("signInEmailError","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 E-Mail."));case 16:c=!0;case 17:if(!(!n||!n.match(ma)||n.length<6||n.length>16)){i.next=21;break}return i.next=20,Object(oa.e)(k("signInPasswordError","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c."));case 20:c=!0;case 21:if(!c){i.next=26;break}return i.next=24,Object(oa.e)(N("\u0412\u0432\u0435\u0434\u0435\u043d\u044b \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"));case 24:i.next=28;break;case 26:return i.next=28,Object(oa.e)(w(t,n));case 28:case"end":return i.stop()}}),da)}var ba=ga,fa=a(71),Ea=a(72),ha=a(60),va=a.n(ha),xa=function(){function e(){Object(fa.a)(this,e)}return Object(Ea.a)(e,null,[{key:"signIn",value:function(e){return va.a.post("/api/auth/sign-in",e).then((function(e){return e})).catch((function(e){var t=e.response;return Object(J.a)({},t)}))}},{key:"signUp",value:function(e){return va.a.post("/api/auth/sign-up",e).then((function(e){return e})).catch((function(e){var t=e.response;return Object(J.a)({},t)}))}}]),e}(),Oa=sa.a.mark(ya);function ya(e){var t,a,n,r;return sa.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.email,a=e.password,n={email:t,password:a},c.prev=2,c.next=5,Object(oa.b)(xa.signIn,n);case 5:if(200!==(r=c.sent).status){c.next=11;break}return c.next=9,Object(oa.e)({type:"SIGN_IN_SUCCESS",data:r.data});case 9:c.next=13;break;case 11:return c.next=13,Object(oa.e)(N(r.data));case 13:c.next=18;break;case 15:c.prev=15,c.t0=c.catch(2),console.error(c.t0);case 18:case"end":return c.stop()}}),Oa,null,[[2,15]])}var ka=ya,ja=sa.a.mark(wa);function wa(e){var t;return sa.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.data,a.next=3,Object(oa.e)(k("signInButtonDisabled",!1));case 3:return a.next=5,Object(oa.e)(y("signInSnackbar",""));case 5:return a.next=7,Object(oa.e)(k("signInEmail",""));case 7:return a.next=9,Object(oa.e)(k("signInPassword",""));case 9:return a.next=11,Object(oa.e)(S(t));case 11:case"end":return a.stop()}}),ja)}var Na=wa,Ca=sa.a.mark(Ia);function Ia(e){var t;return sa.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.message,a.next=3,Object(oa.e)(k("signInButtonDisabled",!1));case 3:return a.next=5,Object(oa.e)(y("signInSnackbar",t));case 5:return a.next=7,Object(oa.d)(4e3);case 7:return a.next=9,Object(oa.e)(y("signInSnackbar",""));case 9:case"end":return a.stop()}}),Ca)}var Sa=Ia,Ta=sa.a.mark(_a);function _a(){return sa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oa.g)("SIGN_IN_VALIDATE",ba);case 2:return e.next=4,Object(oa.g)("SIGN_IN_REQUEST",ka);case 4:return e.next=6,Object(oa.g)("SIGN_IN_SUCCESS",Na);case 6:return e.next=8,Object(oa.g)("SIGN_IN_FAIL",Sa);case 8:case"end":return e.stop()}}),Ta)}var Ua=sa.a.mark(Aa);function Aa(){var e,t,a,n,r,c,i,s;return sa.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(oa.f)((function(e){var t=e.forms;return{name:t.signUpName,nameError:t.signUpNameError,email:t.signUpEmail,emailError:t.signUpEmailError,password:t.signUpPassword,passwordError:t.signUpPasswordError}}));case 2:if(e=o.sent,t=e.name,a=e.nameError,n=e.email,r=e.emailError,c=e.password,i=e.passwordError,s=!1,!(a||r||i)){o.next=13;break}return o.next=13,Object(oa.c)();case 13:return o.next=15,Object(oa.e)(k("signUpButtonDisabled",!0));case 15:if(t){o.next=21;break}return o.next=18,Object(oa.e)(k("signUpNameError","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f."));case 18:s=!0,o.next=31;break;case 21:if(!(t<4||t>16)){o.next=27;break}return o.next=24,Object(oa.e)(k("signUpNameError","\u0418\u043c\u044f \u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043e\u0442 6 \u0434\u043e 16 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432."));case 24:s=!0,o.next=31;break;case 27:if(t.match(pa)){o.next=31;break}return o.next=30,Object(oa.e)(k("signUpNameError","\u0414\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b \u0442\u043e\u043b\u044c\u043a\u043e \u043b\u0430\u0442\u0438\u043d\u0441\u043a\u0438\u0435 \u0438 \u043a\u0438\u0440\u0438\u043b\u043b\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0441\u0438\u043c\u0432\u043e\u043b\u044b, \u0430 \u0442\u0430\u043a \u0436\u0435 \u0447\u0438\u0441\u043b\u0430."));case 30:s=!0;case 31:if(n){o.next=37;break}return o.next=34,Object(oa.e)(k("signUpEmailError","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 E-Mail."));case 34:s=!0,o.next=41;break;case 37:if(ua.a.validate(n)){o.next=41;break}return o.next=40,Object(oa.e)(k("signUpEmailError","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 E-Mail."));case 40:s=!0;case 41:if(c){o.next=47;break}return o.next=44,Object(oa.e)(k("signUpPasswordError","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c."));case 44:s=!0,o.next=57;break;case 47:if(c.match(ma)){o.next=53;break}return o.next=50,Object(oa.e)(k("signUpPasswordError","\u0414\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b \u0442\u043e\u043b\u044c\u043a\u043e \u043b\u0430\u0442\u0438\u043d\u0441\u043a\u0438\u0435 \u0441\u0438\u043c\u0432\u043e\u043b\u044b \u0438 \u0447\u0438\u0441\u043b\u0430."));case 50:s=!0,o.next=57;break;case 53:if(!(!c||c.length<6||c.length>16)){o.next=57;break}return o.next=56,Object(oa.e)(k("signUpPasswordError","\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043e\u0442 6 \u0434\u043e 16 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432."));case 56:s=!0;case 57:if(!s){o.next=62;break}return o.next=60,Object(oa.e)(I("\u0412\u0432\u0435\u0434\u0435\u043d\u044b \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"));case 60:o.next=64;break;case 62:return o.next=64,Object(oa.e)({type:"SIGN_UP_REQUEST",requestBody:{name:t,email:n,password:c}});case 64:case"end":return o.stop()}}),Ua)}var Da=Aa,La=sa.a.mark(za);function za(e){var t,a;return sa.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.requestBody,n.prev=1,n.next=4,Object(oa.b)(xa.signUp,t);case 4:if(201!==(a=n.sent).status){n.next=10;break}return n.next=8,Object(oa.e)({type:"SIGN_UP_SUCCESS",data:a.data});case 8:n.next=12;break;case 10:return n.next=12,Object(oa.e)(I(a.data));case 12:n.next=17;break;case 14:n.prev=14,n.t0=n.catch(1),console.error(n.t0);case 17:case"end":return n.stop()}}),La,null,[[1,14]])}var Pa=za,Ba=sa.a.mark(Ra);function Ra(e){var t;return sa.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.data,a.next=3,Object(oa.e)(k("signUpButtonDisabled",!1));case 3:return a.next=5,Object(oa.e)(y("signUpSnackbar",""));case 5:return a.next=7,Object(oa.e)(k("signUpName",""));case 7:return a.next=9,Object(oa.e)(k("signUpEmail",""));case 9:return a.next=11,Object(oa.e)(k("signUpPassword",""));case 11:return a.next=13,Object(oa.e)(S(t));case 13:case"end":return a.stop()}}),Ba)}var Fa=Ra,Za=sa.a.mark(Ga);function Ga(e){var t;return sa.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.message,a.next=3,Object(oa.e)(k("signUpButtonDisabled",!1));case 3:return a.next=5,Object(oa.e)(y("signUpSnackbar",t));case 5:return a.next=7,Object(oa.d)(4e3);case 7:return a.next=9,Object(oa.e)(y("signUpSnackbar",""));case 9:case"end":return a.stop()}}),Za)}var Ma=Ga,Wa=sa.a.mark(Ha);function Ha(){return sa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oa.g)("SIGN_UP_VALIDATE",Da);case 2:return e.next=4,Object(oa.g)("SIGN_UP_REQUEST",Pa);case 4:return e.next=6,Object(oa.g)("SIGN_UP_SUCCESS",Fa);case 6:return e.next=8,Object(oa.g)("SIGN_UP_FAIL",Ma);case 8:case"end":return e.stop()}}),Wa)}var Va=function(){function e(){Object(fa.a)(this,e)}return Object(Ea.a)(e,null,[{key:"fetch",value:function(e){return va.a.get("/api/news/city/".concat(e)).then((function(e){return e})).catch((function(e){var t=e.response;return Object(J.a)({},t)}))}}]),e}(),Ja=sa.a.mark(Ya);function Ya(){var e,t,a,n,r;return sa.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(oa.e)(y("newsFetchSnackbar","\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u043d\u043e\u0432\u043e\u0441\u0442\u0435\u0439..."));case 2:return c.next=4,Object(oa.f)((function(e){var t=e.cities;return{cityId:t.selectedCityId,cities:t.data}}));case 4:return e=c.sent,t=e.cityId,a=e.cities,n=a.find((function(e){var a=e.id;return t===a})),c.prev=8,c.next=11,Object(oa.b)(Va.fetch,n.title);case 11:if(200!==(r=c.sent).status){c.next=17;break}return c.next=15,Object(oa.e)({type:"SET_NEWS",news:r.data});case 15:c.next=21;break;case 17:return c.next=19,Object(oa.e)(y("newsFetchSnackbar","\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u043d\u043e\u0432\u043e\u0441\u0442\u0435\u0439."));case 19:return c.next=21,Object(oa.d)(3e3);case 21:c.next=30;break;case 23:return c.prev=23,c.t0=c.catch(8),console.error(c.t0),c.next=28,Object(oa.e)(y("newsFetchSnackbar","\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430! \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443."));case 28:return c.next=30,Object(oa.d)(3e3);case 30:return c.prev=30,c.next=33,Object(oa.e)(y("newsFetchSnackbar",""));case 33:return c.finish(30);case 34:case"end":return c.stop()}}),Ja,null,[[8,23,30,34]])}var Qa=Ya,qa=sa.a.mark($a);function $a(){return sa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oa.g)("FETCH_NEWS",Qa);case 2:case"end":return e.stop()}}),qa)}var Xa=sa.a.mark(Ka);function Ka(){return sa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oa.a)([_a(),Ha(),$a()]);case 2:case"end":return e.stop()}}),Xa)}var en=Ka,tn=Object(Jt.a)(),an=Object(p.e)(ca,Object(p.a)(tn));window.getState=an.getState,tn.run(en);var nn=an,rn=(a(168),Object(l.a)({palette:{primary:{main:"#f64b11"},secondary:{main:"#2196F3"}}}));i.a.render(r.a.createElement(s.a,null,r.a.createElement(o.a,{store:nn},r.a.createElement(u.a,{theme:rn},r.a.createElement(Vt,null)))),document.getElementById("root"))},54:function(e,t,a){e.exports=a.p+"static/media/logo_dark.6ea33164.svg"}},[[140,1,2]]]);
//# sourceMappingURL=main.3d09952f.chunk.js.map