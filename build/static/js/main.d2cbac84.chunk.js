(this["webpackJsonpcrime-maps"]=this["webpackJsonpcrime-maps"]||[]).push([[0],{101:function(e,t,a){e.exports=a(130)},129:function(e,t,a){},130:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(14),i=a.n(c),o=a(64),l=a(43),s=a(175),u=a(38),m=a(23),d=a(177),p=a(27),f=a(176),g=a(82),b=a.n(g),E=a(39),h=a(154),C=a(83),v=a.n(C),y=a(84),O=a.n(y),k={novosibirsk:{backgroundImage:"url(".concat(v.a,")"),backgroundSize:"cover",backgroundRepeat:"no-repeat"},krasnoyarsk:{backgroundImage:"url(".concat(O.a,")"),backgroundSize:"cover",backgroundRepeat:"no-repeat"}},x=Object(h.a)((function(e){return Object(E.a)({},k,{root:{width:360,flexShrink:0},rootPaper:{width:360},header:{position:"relative",height:200},searchContainer:{display:"flex",justifyContent:"space-between",margin:e.spacing(3),padding:"5px 10px",backgroundColor:"#fff",borderRadius:2*e.shape.borderRadius,border:"1px solid #ccc"},search:{width:"86%"},darkBG:{paddingTop:1,height:"100%",backgroundColor:"rgba(0, 0, 0, .5)"}})})),j=a(56),N=a.n(j),w=a(48),I=a(157),S=a(159),M=a(53),B=Object(h.a)((function(e){return Object(M.a)({root:{display:"flex",alignItems:"center",overflowX:"hidden",margin:e.spacing(1)},cityName:{marginLeft:e.spacing(1),color:e.palette.text},emblemContainer:{display:"none"},grow:{flexGrow:1},changeCityButton:{color:e.palette.text}},e.breakpoints.up("md"),{root:{margin:e.spacing(3)},cityName:{color:"#fff"},emblemContainer:{display:"flex",justifyContent:"center",alignItems:"center",width:40,height:40,background:"#fff",borderRadius:"50%"},emblem:{height:30},changeCityButton:{color:"#fff"}})})),R=a(88),L=a.n(R),T=a(89),D=a.n(T),A={novosibirsk:L.a,krasnoyarsk:D.a};var G=function(e){var t=e.fetchCities,a=e.setModal,c=e.loading,i=e.city,o=e.titleCity,l=B();return Object(n.useEffect)((function(){c&&t()}),[c,t]),r.a.createElement("div",{className:l.root},r.a.createElement("div",{className:l.emblemContainer},r.a.createElement("img",{className:l.emblem,src:A[o],alt:""})),r.a.createElement(w.a,{variant:"h6",className:l.cityName},i),r.a.createElement("div",{className:l.grow}),r.a.createElement(I.a,{onClick:function(){return a(!0)}},r.a.createElement(S.a,{className:l.changeCityButton})))};var z=function(e){var t=e.selectedCity,a=e.loading,n=e.fetchCities,c=e.setModal,i=x();return r.a.createElement(d.a,{smDown:!0,implementation:"css"},r.a.createElement(p.a,{variant:"permanent",className:i.root,classes:{paper:i.rootPaper}},r.a.createElement("div",{className:b()(i.header,i[t.title])},r.a.createElement("div",{className:i.darkBG},r.a.createElement("div",{className:i.searchContainer},r.a.createElement("img",{src:N.a,alt:"",height:"35px"}),r.a.createElement(f.a,{className:i.search,placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e Crime Maps..."})),r.a.createElement(G,{loading:a,fetchCities:n,setModal:c,titleCity:t.title,city:t.name})))))},_=a(62),F=a(160),H=a(182),J=a(161),P=a(162),W=Object(h.a)((function(e){return{openButton:{position:"absolute",top:e.spacing(1),left:e.spacing(1),zIndex:1e3},root:{width:"80%",zIndex:1001},header:{display:"flex",alignItems:"center",padding:e.spacing(2),paddingRight:e.spacing(0),background:"linear-gradient(45deg, #2196F3 30%, #21CBF3 90%)"},title:{marginLeft:e.spacing(1),color:"#fff"},logo:{height:30},grow:{flexGrow:1},closeMenuButton:{color:"#fff"}}}));var Z=function(e){var t=e.loading,a=e.fetchCities,c=e.setModal,i=e.selectedCity,o=W(),l=Object(n.useState)(!1),s=Object(_.a)(l,2),u=s[0],m=s[1],p=function(e){return m(e)};return r.a.createElement(d.a,{mdUp:!0,implementation:"css"},r.a.createElement(F.a,{className:o.openButton,onClick:function(){return p(!0)}},r.a.createElement(J.a,null)),r.a.createElement(H.a,{open:u,onOpen:function(){return p(!0)},onClose:function(){return p(!1)},className:o.root,classes:{paper:o.root}},r.a.createElement("div",{className:o.header},r.a.createElement("img",{src:N.a,alt:"",className:o.logo}),r.a.createElement(w.a,{variant:"h6",className:o.title},"Crime Maps"),r.a.createElement("div",{className:o.grow}),r.a.createElement(I.a,{className:o.closeMenuButton,onClick:function(){return p(!1)}},r.a.createElement(P.a,null))),r.a.createElement(G,{loading:t,fetchCities:a,setModal:c,titleCity:i.title,city:i.name})))},Y=function(){return{type:"FETCH_CITIES"}},U=function(e){return{type:"MODAL",isOpen:e}},X=function(e){return{type:"ERROR",error:e}},$=function(e){return{type:"CHANGE_CITY",id:e}};var q=Object(l.b)((function(e){var t=e.cities;return{selectedCityId:t.selectedCity,citiesList:t.data,loading:t.loading}}),(function(e){return Object(m.b)({fetchCities:Y,setModal:U},e)}))((function(e){var t=e.fetchCities,a=e.setModal,n=e.selectedCityId,c=e.citiesList,i=e.loading,o=c.find((function(e){return e.id===n}));return r.a.createElement("nav",null,r.a.createElement(z,{selectedCity:o,loading:i,fetchCities:t,setModal:a}),r.a.createElement(Z,{selectedCity:o,loading:i,fetchCities:t,setModal:a}))})),K=a(181),Q=a(180),V=a(163),ee=a(179);var te=function(){return r.a.createElement(K.a,{center:[54.983376,82.892057],zoom:15,maxZoom:100,attributionControl:!0,zoomControl:!1,doubleClickZoom:!0,scrollWheelZoom:!0,dragging:!0,animate:!0,easeLinearity:.35},r.a.createElement(Q.a,{url:"http://{s}.tile.osm.org/{z}/{x}/{y}.png"}),r.a.createElement(V.a,{position:[54.983376,82.892057]},r.a.createElement(ee.a,null,"Popup for any custom information.")))},ae=a(164),ne=a(165),re=a(167),ce=a(169),ie=a(178),oe=a(170),le=a(171),se=a(173),ue=a(174),me=a(166),de=a(168),pe=a(172),fe=Object(h.a)((function(e){return{title:{position:"relative",backgroundColor:"#eee",borderBottom:"1px solid #cecece"},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1)},loadingText:{display:"flex",justifyContent:"center",alignItems:"center"},rotate:{animation:"$rotate 1s infinite"},"@keyframes rotate":{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(-360deg)"}},actions:{backgroundColor:"#eee",borderTop:"1px solid #cecece"}}}));var ge=Object(l.b)((function(e){var t=e.cities;return{isOpen:t.isSelectorOpen,cities:t.data,loading:t.loading,error:t.error}}),(function(e){return Object(m.b)({setModal:U,changeCity:$},e)}))((function(e){var t=Object(n.useState)(null),a=Object(_.a)(t,2),c=a[0],i=a[1],o=fe(),l=e.isOpen,s=e.loading,u=e.setModal,m=e.cities,d=e.changeCity;return r.a.createElement(ae.a,{open:l,onClose:function(){return u(!1)},maxWidth:"sm",fullWidth:!0},r.a.createElement(ne.a,{className:o.title},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0433\u043e\u0440\u043e\u0434",r.a.createElement(I.a,{onClick:function(){return u(!1)},className:o.closeButton},r.a.createElement(me.a,null))),r.a.createElement(re.a,null,s&&r.a.createElement(w.a,{variant:"h6",color:"textSecondary",className:o.loadingText},"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0441\u043f\u0438\u0441\u043a\u0430 \u0433\u043e\u0440\u043e\u0434\u043e\u0432",r.a.createElement(de.a,{className:o.rotate})),!s&&r.a.createElement(ce.a,{component:"nav"},m.map((function(e){return r.a.createElement(ie.a,{button:!0,key:e.id,selected:e.id===c,onClick:function(){return i(e.id)}},r.a.createElement(oe.a,null,e.name),e.id===c&&r.a.createElement(le.a,null,r.a.createElement(I.a,null,r.a.createElement(pe.a,null))))})))),r.a.createElement(se.a,{className:o.actions},r.a.createElement(ue.a,{onClick:function(){return e=c,localStorage.setItem("selectedCity",e),d(e),void u(!1);var e},disabled:null===c},"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c")))})),be=Object(h.a)((function(e){return{root:{display:"flex",height:"100%"}}}));var Ee=function(){var e=be();return r.a.createElement("div",{className:e.root},r.a.createElement(q,null),r.a.createElement(te,null),r.a.createElement(ge,null))};var he=function(){return r.a.createElement(n.Fragment,null,r.a.createElement(s.a,null),r.a.createElement(u.c,null,r.a.createElement(u.a,{exact:!0,path:"/",component:Ee})))},Ce=a(92),ve={data:JSON.parse(localStorage.getItem("citiesList"))||[{_id:"5e8f0f4f8883b725cc275bad",id:1,title:"novosibirsk",name:"\u041d\u043e\u0432\u043e\u0441\u0438\u0431\u0438\u0440\u0441\u043a",lat:55.0415,lng:82.9346}],isSelectorOpen:!1,error:!1,loading:!0,selectedCity:+localStorage.getItem("selectedCity")||1};var ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD":return Object(E.a)({},e,{data:t.cities});case"MODAL":return Object(E.a)({},e,{isSelectorOpen:t.isOpen});case"ERROR":return Object(E.a)({},e,{error:t.error});case"LOADING":return Object(E.a)({},e,{loading:t.loading});case"CHANGE_CITY":return Object(E.a)({},e,{selectedCity:t.id});default:return e}},Oe=Object(m.c)({cities:ye}),ke=a(40),xe=a.n(ke),je=a(35),Ne=a(91),we=a.n(Ne),Ie=xe.a.mark(Me),Se=xe.a.mark(Be);function Me(){var e,t;return xe.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(je.b)(we.a.get,"/api/cities/");case 3:return e=a.sent,t=e.data,localStorage.setItem("citiesList",JSON.stringify(t)),a.next=8,Object(je.c)({type:"ADD",cities:t});case 8:return a.next=10,Object(je.c)(X(!1));case 10:return a.next=12,Object(je.c)({type:"LOADING",loading:!1});case 12:a.next=19;break;case 14:return a.prev=14,a.t0=a.catch(0),console.error(a.t0.message),a.next=19,Object(je.c)(X(!0));case 19:case"end":return a.stop()}}),Ie,null,[[0,14]])}function Be(){return xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(je.d)("FETCH_CITIES",Me);case 2:case"end":return e.stop()}}),Se)}var Re=xe.a.mark(Le);function Le(){return xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(je.a)([Be()]);case 2:case"end":return e.stop()}}),Re)}var Te=Le,De=Object(Ce.a)(),Ae=Object(m.e)(Oe,Object(m.a)(De));window.getState=Ae.getState,De.run(Te);var Ge=Ae;a(129);i.a.render(r.a.createElement(o.a,null,r.a.createElement(l.a,{store:Ge},r.a.createElement(he,null))),document.getElementById("root"))},56:function(e,t,a){e.exports=a.p+"static/media/logo_dark.6ea33164.svg"},83:function(e,t,a){e.exports=a.p+"static/media/novosibirsk.3223fede.jpg"},84:function(e,t,a){e.exports=a.p+"static/media/krasnoyarsk.aaf9cd5c.jpg"},88:function(e,t,a){e.exports=a.p+"static/media/novosibirsk.f2328259.svg"},89:function(e,t,a){e.exports=a.p+"static/media/krasnoyarsk.0bba5569.svg"}},[[101,1,2]]]);
//# sourceMappingURL=main.d2cbac84.chunk.js.map