{"version":3,"sources":["images/pins/lost_man.svg","images/pins/protest.svg","images/pins/theft.svg","components/Menu/cityBackgrounds.js","components/Menu/Desctop/styles.js","components/Menu/Geo/styles.js","components/Menu/Geo/emblems.js","components/Menu/Geo/index.js","components/Menu/Desctop/index.js","components/Menu/Mobile/styles.js","components/Menu/Mobile/index.js","store/AC/cities.js","store/actions/cities.js","components/Menu/index.js","store/AC/map.js","store/actions/map.js","store/AC/incident.js","store/actions/incident.js","components/Map/getIcon.js","constants/incidents.js","components/Map/index.js","constants/map.js","components/CitiesSelector/styles.js","components/CitiesSelector/index.js","components/Incident/styles.js","components/Incident/index.js","containers/Main/styles.js","store/AC/incidents.js","store/actions/incidents.js","containers/Main/index.js","store/AC/geodata.js","store/actions/geodata.js","containers/App/index.js","store/reducers/cities.js","store/reducers/map.js","store/reducers/geodata.js","store/reducers/incidents.js","store/reducers/index.js","store/reducers/incident.js","store/sagas/cities.js","store/sagas/incidents.js","store/sagas/index.js","store/index.js","index.js","images/logo_dark.svg","images/citiesBG/novosibirsk.jpg","images/citiesBG/krasnoyarsk.jpg","images/emblems/novosibirsk.svg","images/emblems/krasnoyarsk.svg","images/pins/user.svg","images/pins/car_theft.svg","images/pins/fire.svg","images/pins/accident.svg","images/pins/animal.svg","images/pins/violence.svg","images/pins/bad_services.svg","images/pins/death.svg","images/pins/dtp.svg"],"names":["module","exports","novosibirsk","backgroundImage","backgroundSize","backgroundRepeat","krasnoyarsk","makeStyles","theme","backgrounds","root","width","flexShrink","rootPaper","header","position","height","searchContainer","display","justifyContent","margin","spacing","padding","backgroundColor","borderRadius","shape","border","search","darkBG","paddingTop","alignItems","overflowX","cityName","marginLeft","color","palette","text","emblemContainer","grow","flexGrow","changeCityButton","breakpoints","up","background","emblem","Geo","props","fetchCities","setModal","loading","city","titleCity","classes","useStyles","useEffect","className","src","emblems","alt","Typography","variant","IconButton","onClick","Edit","DesctopMenu","selectedCity","Hidden","smDown","implementation","Drawer","paper","cn","title","LogoDark","InputBase","placeholder","name","openButton","top","left","zIndex","index","paddingRight","logo","closeMenuButton","MobileMenu","useState","isOpen","setOpen","toggleMenu","value","mdUp","Fab","Menu","SwipeableDrawer","open","onOpen","onClose","type","setError","error","changeCity","id","changeSelectedCity","connect","cities","selectedCityId","citiesList","data","dispatch","bindActionCreators","find","Desctop","Mobile","changeCoordinates","lat","lng","changeZoom","zoom","incrementZoom","decrementZoom","openIncident","incident","closeIncident","getIcon","iconUrl","carTheftIcon","fireIcon","accidentIcon","animalIcon","violenceIcon","badServicesIcon","deathIcon","dtpIcon","lostManIcon","protestIcon","theftIcon","userIcon","L","Icon","iconSize","Point","iconAnchor","map","geodata","incidents","center","maxZoom","minZoom","attributionControl","zoomControl","doubleClickZoom","scrollWheelZoom","dragging","animate","easeLinearity","onDragEnd","target","getCenter","onZoomEnd","test","getZoom","TileLayer","url","Marker","coords","latitude","longitude","icon","key","borderBottom","closeButton","right","loadingText","rotate","animation","transform","actions","borderTop","isSelectorOpen","setSelectedCityId","Dialog","maxWidth","fullWidth","DialogTitle","Close","DialogContent","Loop","List","component","ListItem","button","selected","ListItemText","ListItemSecondaryAction","Check","DialogActions","Button","localStorage","setItem","batch","handleClick","disabled","titleContainer","infoContainer","marginBottom","date","cursor","textDecoration","views","viewsIcon","sourcesContainer","flexDirection","marginTop","sourceBorder","Incident","close","timestamp","sources","Date","day","getDate","month","getMonth","year","getFullYear","hours","getHours","minutes","getMinutes","useTheme","fullScreen","useMediaQuery","down","Visibility","source","i","Link","href","link","buttonUserPosition","bottom","zoomButtonsContainer","buttonZoomOut","fetchAllIncidents","isLoading","selectedCityid","size","NearMe","ZoomIn","ZoomOut","setLocation","setLocationError","navigator","geolocation","getCurrentPosition","CssBaseline","exact","path","Main","initialState","JSON","parse","getItem","_id","state","action","savedCities","combineReducers","call","axios","get","stringify","put","console","message","takeLatest","fetchIncidents","cityId","select","rootSaga","all","sagaMiddleware","createSagaMiddleware","store","createStore","rootReducer","applyMiddleware","window","getState","run","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.6d9dc59e.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/lost_man.9db9caf4.svg\";","module.exports = __webpack_public_path__ + \"static/media/protest.a4a6d874.svg\";","module.exports = __webpack_public_path__ + \"static/media/theft.2d127463.svg\";","import novosibirsk from '../../images/citiesBG/novosibirsk.jpg';\r\nimport krasnoyarsk from '../../images/citiesBG/krasnoyarsk.jpg';\r\n\r\nexport default {\r\n  novosibirsk: {\r\n    backgroundImage: `url(${novosibirsk})`,\r\n    backgroundSize: 'cover',\r\n    backgroundRepeat: 'no-repeat',\r\n  },\r\n  krasnoyarsk: {\r\n    backgroundImage: `url(${krasnoyarsk})`,\r\n    backgroundSize: 'cover',\r\n    backgroundRepeat: 'no-repeat',\r\n  }\r\n};\r\n","import { makeStyles } from '@material-ui/core/styles';\r\nimport backgrounds from '../cityBackgrounds';\r\n\r\nconst drawerWidth = 360;\r\n\r\nexport default makeStyles(theme => ({\r\n  ...backgrounds,\r\n  root: {\r\n    width: drawerWidth,\r\n    flexShrink: 0\r\n  },\r\n  rootPaper: {\r\n    width: drawerWidth\r\n  },\r\n  header: {\r\n    position: 'relative',\r\n    height: 200,\r\n  },\r\n  searchContainer: {\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    margin: theme.spacing(3),\r\n    padding: '5px 10px',\r\n    backgroundColor: '#fff',\r\n    borderRadius: theme.shape.borderRadius * 2,\r\n    border: '1px solid #ccc',\r\n  },\r\n  search: {\r\n    width: '86%'\r\n  },\r\n  darkBG: {\r\n    paddingTop: 1,\r\n    height: '100%',\r\n    backgroundColor: 'rgba(0, 0, 0, .5)',\r\n  },\r\n}));\r\n","import { makeStyles } from '@material-ui/core/styles';\r\n\r\nexport default makeStyles(theme => ({\r\n  root: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    overflowX: 'hidden',\r\n    margin: theme.spacing(1),\r\n  },\r\n  cityName: {\r\n    marginLeft: theme.spacing(1),\r\n    color: theme.palette.text,\r\n  },\r\n  emblemContainer: {\r\n    display: 'none',\r\n  },\r\n  grow: {\r\n    flexGrow: 1,\r\n  },\r\n  changeCityButton: {\r\n    color: theme.palette.text,\r\n  },\r\n\r\n  [theme.breakpoints.up('md')]: {\r\n    root: {\r\n      margin: theme.spacing(3),\r\n    },\r\n    cityName: {\r\n      color: '#fff',\r\n    },\r\n    emblemContainer: {\r\n      display: 'flex',\r\n      justifyContent: 'center',\r\n      alignItems: 'center',\r\n      width: 40,\r\n      height: 40,\r\n      background: '#fff',\r\n      borderRadius: '50%',\r\n    },\r\n    emblem: {\r\n      height: 30,\r\n    },\r\n    changeCityButton: {\r\n      color: '#fff',\r\n    }\r\n  },\r\n}));\r\n","import novosibirsk from '../../../images/emblems/novosibirsk.svg';\r\nimport krasnoyarsk from '../../../images/emblems/krasnoyarsk.svg';\r\n\r\nexport default {\r\n  novosibirsk,\r\n  krasnoyarsk,\r\n};\r\n","import React, { useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  Typography,\r\n  IconButton\r\n} from '@material-ui/core';\r\nimport { Edit as EditIcon } from '@material-ui/icons';\r\nimport useStyles from './styles';\r\nimport emblems from './emblems';\r\n\r\nfunction Geo(props) {\r\n  const {\r\n    fetchCities,\r\n    setModal,\r\n    loading,\r\n    city,\r\n    titleCity,\r\n  } = props;\r\n\r\n  const classes = useStyles();\r\n\r\n  useEffect(() => {\r\n    if (loading) fetchCities();\r\n  }, [loading, fetchCities]);\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <div className={classes.emblemContainer}>\r\n        <img className={classes.emblem} src={emblems[titleCity]} alt=\"\" />\r\n      </div>\r\n      <Typography variant=\"h6\" className={classes.cityName}>{city}</Typography>\r\n      <div className={classes.grow} />\r\n      <IconButton onClick={() => setModal(true)}>\r\n        <EditIcon className={classes.changeCityButton} />\r\n      </IconButton>\r\n    </div>\r\n  );\r\n}\r\n\r\nGeo.propTypes = {\r\n  fetchCities: PropTypes.func.isRequired,\r\n  setModal: PropTypes.func.isRequired,\r\n  loading: PropTypes.bool.isRequired,\r\n  titleCity: PropTypes.string.isRequired,\r\n  city: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default Geo;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  Drawer,\r\n  Hidden,\r\n  InputBase\r\n} from '@material-ui/core';\r\nimport cn from 'classnames';\r\nimport makeStyles from './styles';\r\nimport LogoDark from '../../../images/logo_dark.svg';\r\nimport Geo from '../Geo';\r\n\r\nfunction DesctopMenu(props) {\r\n  const {\r\n    selectedCity,\r\n    loading,\r\n    fetchCities,\r\n    setModal,\r\n  } = props;\r\n  const classes = makeStyles();\r\n\r\n  return (\r\n    <Hidden smDown implementation=\"css\">\r\n      <Drawer\r\n          variant=\"permanent\"\r\n          className={classes.root}\r\n          classes={{\r\n            paper: classes.rootPaper\r\n          }}\r\n        >\r\n          <div className={cn(classes.header, classes[selectedCity.title])}>\r\n            <div className={classes.darkBG}>\r\n              <div className={classes.searchContainer}>\r\n                <img src={LogoDark} alt=\"\" height=\"35px\" />\r\n                <InputBase\r\n                  className={classes.search}\r\n                  placeholder=\"Поиск по Crime Maps...\"\r\n                />\r\n              </div>\r\n              <Geo\r\n                loading={loading}\r\n                fetchCities={fetchCities}\r\n                setModal={setModal}\r\n                titleCity={selectedCity.title}\r\n                city={selectedCity.name}\r\n              />\r\n            </div>\r\n          </div>\r\n        </Drawer>\r\n    </Hidden>\r\n  );\r\n}\r\n\r\nDesctopMenu.propTypes = {\r\n  selectedCity: PropTypes.object.isRequired,\r\n  loading: PropTypes.bool.isRequired,\r\n  fetchCities: PropTypes.func.isRequired,\r\n  setModal: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default DesctopMenu;\r\n","import { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst width = \"80%\";\r\nconst index = 1000;\r\n\r\nexport default makeStyles(theme => ({\r\n  openButton: {\r\n    position: 'absolute',\r\n    top: theme.spacing(1),\r\n    left: theme.spacing(1),\r\n    zIndex: index,\r\n  },\r\n  root: {\r\n    width,\r\n    zIndex: index + 1\r\n  },\r\n  header: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    padding: theme.spacing(2),\r\n    paddingRight: theme.spacing(0),\r\n    background: 'linear-gradient(45deg, #2196F3 30%, #21CBF3 90%)'\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(1),\r\n    color: '#fff'\r\n  },\r\n  logo: {\r\n    height: 30\r\n  },\r\n  grow: {\r\n    flexGrow: 1,\r\n  },\r\n  closeMenuButton: {\r\n    color: '#fff'\r\n  }\r\n}));\r\n","import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  Hidden,\r\n  SwipeableDrawer,\r\n  Fab,\r\n  Typography,\r\n  IconButton,\r\n} from '@material-ui/core';\r\nimport {\r\n  Menu as MenuIcon,\r\n  ArrowBackIos as ArrowIcon,\r\n} from '@material-ui/icons';\r\nimport useStyles from './styles';\r\nimport LogoDark from '../../../images/logo_dark.svg';\r\nimport Geo from '../Geo';\r\n\r\nfunction MobileMenu(props) {\r\n  const {\r\n    loading,\r\n    fetchCities,\r\n    setModal,\r\n    selectedCity,\r\n  } = props;\r\n  const classes = useStyles();\r\n  const [isOpen, setOpen] = useState(false);\r\n  const toggleMenu = value => setOpen(value);\r\n\r\n  return (\r\n    <Hidden mdUp implementation=\"css\">\r\n      <Fab className={classes.openButton} onClick={() => toggleMenu(true)}>\r\n        <MenuIcon />\r\n      </Fab>\r\n\r\n      <SwipeableDrawer\r\n        open={isOpen}\r\n        onOpen={() => toggleMenu(true)}\r\n        onClose={() => toggleMenu(false)}\r\n        className={classes.root}\r\n        classes={{ paper: classes.root }}\r\n      >\r\n        <div className={classes.header}>\r\n          <img src={LogoDark} alt=\"\" className={classes.logo} />\r\n          <Typography variant=\"h6\" className={classes.title}>\r\n            Crime Maps\r\n          </Typography>\r\n          <div className={classes.grow} />\r\n          <IconButton className={classes.closeMenuButton} onClick={() => toggleMenu(false)}>\r\n            <ArrowIcon />\r\n          </IconButton>\r\n        </div>\r\n        <Geo\r\n          loading={loading}\r\n          fetchCities={fetchCities}\r\n          setModal={setModal}\r\n          titleCity={selectedCity.title}\r\n          city={selectedCity.name}\r\n        />\r\n      </SwipeableDrawer>\r\n    </Hidden>\r\n  );\r\n}\r\n\r\nMobileMenu.propTypes = {\r\n  fetchCities: PropTypes.func.isRequired,\r\n  setModal: PropTypes.func.isRequired,\r\n  loading: PropTypes.bool.isRequired,\r\n  selectedCity: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default MobileMenu;\r\n","import {\r\n  ADD,\r\n  FETCH_CITIES,\r\n  MODAL,\r\n  ERROR,\r\n  LOADING,\r\n  CHANGE_CITY,\r\n  CHANGE_SELECTED_CITY,\r\n} from '../actions/cities';\r\n\r\nexport const setCities = cities => ({ type: ADD, cities });\r\nexport const fetchCities = () => ({ type: FETCH_CITIES });\r\nexport const setModal = isOpen => ({ type: MODAL, isOpen});\r\nexport const setError = error => ({ type: ERROR, error });\r\nexport const setLoading = loading => ({ type: LOADING, loading });\r\nexport const changeCity = id => ({ type: CHANGE_CITY, id });\r\nexport const changeSelectedCity = id => ({ type: CHANGE_SELECTED_CITY, id });\r\n","export const ADD = 'ADD';\r\nexport const FETCH_CITIES = 'FETCH_CITIES';\r\nexport const MODAL = 'MODAL';\r\nexport const ERROR = 'ERROR';\r\nexport const LOADING = 'LOADING';\r\nexport const CHANGE_CITY = 'CHANGE_CITY';\r\nexport const CHANGE_SELECTED_CITY = 'CHANGE_SELECTED_CITY';\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { bindActionCreators } from 'redux';\r\nimport { connect } from 'react-redux';\r\nimport DesctopMenu from './Desctop';\r\nimport Mobile from './Mobile';\r\nimport { fetchCities, setModal } from '../../store/AC/cities';\r\n\r\nfunction Menu(props) {\r\n  const {\r\n    fetchCities,\r\n    setModal,\r\n    selectedCityId,\r\n    citiesList,\r\n    loading,\r\n  } = props;\r\n\r\n  const selectedCity = citiesList.find(city => city.id === selectedCityId);\r\n\r\n  return (\r\n    <nav>\r\n      <DesctopMenu\r\n        selectedCity={selectedCity}\r\n        loading={loading}\r\n        fetchCities={fetchCities}\r\n        setModal={setModal}\r\n      />\r\n      <Mobile\r\n        selectedCity={selectedCity}\r\n        loading={loading}\r\n        fetchCities={fetchCities}\r\n        setModal={setModal}\r\n      />\r\n    </nav>\r\n  );\r\n}\r\n\r\nMenu.propTypes = {\r\n  fetchCities: PropTypes.func.isRequired,\r\n  setModal: PropTypes.func.isRequired,\r\n  selectedCityId: PropTypes.number.isRequired,\r\n  citiesList: PropTypes.array.isRequired,\r\n  loading: PropTypes.bool.isRequired,\r\n};\r\n\r\nconst mapStateToProps = ({ cities: { selectedCity, data, loading } }) => ({\r\n  selectedCityId: selectedCity,\r\n  citiesList: data,\r\n  loading,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => bindActionCreators({\r\n  fetchCities,\r\n  setModal,\r\n}, dispatch);\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Menu);\r\n","import {\r\n  CHANGE_COORDINATES,\r\n  SET_ZOOM,\r\n  INCREMENT_ZOOM,\r\n  DECREMENT_ZOOM,\r\n} from '../actions/map';\r\n\r\nexport const changeCoordinates = (lat, lng) => ({ type: CHANGE_COORDINATES, lat, lng });\r\nexport const changeZoom = zoom => ({ type: SET_ZOOM, zoom });\r\nexport const incrementZoom = () => ({ type: INCREMENT_ZOOM });\r\nexport const decrementZoom = () => ({ type: DECREMENT_ZOOM });\r\n","export const CHANGE_COORDINATES = 'CHANGE_COORDINATES';\r\nexport const SET_ZOOM = 'SET_ZOOM';\r\nexport const INCREMENT_ZOOM = 'INCREMENT_ZOOM';\r\nexport const DECREMENT_ZOOM = 'DECREMENT_ZOOM';\r\n\r\n","import {\r\n  OPEN_INCIDENT,\r\n  CLOSE_INCIDENT,\r\n} from '../actions/incident';\r\n\r\nexport const openIncident = incident => ({ type: OPEN_INCIDENT, incident });\r\nexport const closeIncident = () => ({ type: CLOSE_INCIDENT });\r\n","export const OPEN_INCIDENT = 'OPEN_INCIDENT';\r\nexport const CLOSE_INCIDENT = 'CLOSE_INCIDENT';\r\n","import L from 'leaflet';\r\nimport userIcon from '../../images/pins/user.svg';\r\nimport carTheftIcon from '../../images/pins/car_theft.svg';\r\nimport fireIcon from '../../images/pins/fire.svg';\r\nimport accidentIcon from '../../images/pins/accident.svg';\r\nimport animalIcon from '../../images/pins/animal.svg';\r\nimport violenceIcon from '../../images/pins/violence.svg';\r\nimport badServicesIcon from '../../images/pins/bad_services.svg';\r\nimport deathIcon from '../../images/pins/death.svg';\r\nimport dtpIcon from '../../images/pins/dtp.svg';\r\nimport lostManIcon from '../../images/pins/lost_man.svg';\r\nimport protestIcon from '../../images/pins/protest.svg';\r\nimport theftIcon from '../../images/pins/theft.svg';\r\nimport {\r\n  CAR_THEFT,\r\n  FIRE,\r\n  ACCIDENT,\r\n  ANIMAL,\r\n  VIOLENCE,\r\n  BAD_SERVICES,\r\n  DEATH,\r\n  DTP,\r\n  LOST_MAN,\r\n  PROTEST,\r\n  THEFT,\r\n} from '../../constants/incidents';\r\n\r\nexport default function getIcon(type) {\r\n  let iconUrl;\r\n  switch (type) {\r\n    case CAR_THEFT:\r\n      iconUrl = carTheftIcon; break;\r\n    case FIRE:\r\n      iconUrl = fireIcon; break;\r\n    case ACCIDENT:\r\n      iconUrl = accidentIcon; break;\r\n    case ANIMAL:\r\n      iconUrl = animalIcon; break;\r\n    case VIOLENCE:\r\n      iconUrl = violenceIcon; break;\r\n    case BAD_SERVICES:\r\n      iconUrl = badServicesIcon; break;\r\n    case DEATH:\r\n      iconUrl = deathIcon; break;\r\n    case DTP:\r\n      iconUrl = dtpIcon; break;\r\n    case LOST_MAN:\r\n      iconUrl = lostManIcon; break;\r\n    case PROTEST:\r\n      iconUrl = protestIcon; break;\r\n    case THEFT:\r\n      iconUrl = theftIcon; break;\r\n    default:\r\n      iconUrl = userIcon;\r\n  }\r\n\r\n  return new L.Icon({\r\n    iconUrl,\r\n    iconSize: new L.Point(40, 60),\r\n    iconAnchor: [20, 60]\r\n  });\r\n};\r\n","export const CAR_THEFT = 0;\r\nexport const FIRE = 1;\r\nexport const ACCIDENT = 2;\r\nexport const ANIMAL = 3;\r\nexport const VIOLENCE = 4;\r\nexport const BAD_SERVICES = 5;\r\nexport const DEATH = 6;\r\nexport const DTP = 7;\r\nexport const LOST_MAN = 8;\r\nexport const PROTEST = 9;\r\nexport const THEFT = 10;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport { Map as LeafletMap, TileLayer, Marker } from 'react-leaflet';\r\nimport { changeCoordinates, changeZoom } from '../../store/AC/map';\r\nimport { openIncident } from '../../store/AC/incident';\r\nimport { MAX_ZOOM, MIN_ZOOM } from '../../constants/map';\r\nimport getIcon from './getIcon';\r\n\r\nfunction Map(props) {\r\n  const {\r\n    lat,\r\n    lng,\r\n    zoom,\r\n    geodata,\r\n    changeCoordinates,\r\n    changeZoom,\r\n    incidents,\r\n    openIncident,\r\n  } = props;\r\n\r\n  const handleDrag = ({ target }) => {\r\n    const { lat, lng } = target.getCenter();\r\n    changeCoordinates(lat, lng);\r\n  };\r\n\r\n  return (\r\n    <LeafletMap\r\n        center={[lat, lng]}\r\n        zoom={zoom}\r\n        maxZoom={MAX_ZOOM}\r\n        minZoom={MIN_ZOOM}\r\n        attributionControl={true}\r\n        zoomControl={false}\r\n        doubleClickZoom={true}\r\n        scrollWheelZoom={true}\r\n        dragging={true}\r\n        animate={true}\r\n        easeLinearity={0.35}\r\n        onDragEnd={handleDrag}\r\n        onZoomEnd={test => changeZoom(test.target.getZoom())}\r\n      >\r\n        <TileLayer\r\n          url='http://{s}.tile.osm.org/{z}/{x}/{y}.png'\r\n        />\r\n        {\r\n          geodata ?\r\n            <Marker\r\n              position={[geodata.coords.latitude, geodata.coords.longitude]}\r\n              icon={getIcon()}\r\n            >\r\n              \r\n            </Marker>\r\n            : null\r\n        }\r\n        {\r\n          incidents.map(\r\n            incident =>\r\n              <Marker\r\n                key={incident.id}\r\n                position={incident.coords}\r\n                icon={getIcon(incident.type)}\r\n                onClick={() => openIncident(incident)}\r\n              />\r\n          )\r\n        }\r\n      </LeafletMap>\r\n  );\r\n}\r\n\r\nMap.propTypes = {\r\n  lat: PropTypes.number.isRequired,\r\n  lng: PropTypes.number.isRequired,\r\n  geodata: PropTypes.object,\r\n  changeCoordinates: PropTypes.func.isRequired,\r\n  zoom: PropTypes.number.isRequired,\r\n  changeZoom: PropTypes.func.isRequired,\r\n  incidents: PropTypes.array.isRequired,\r\n  openIncident: PropTypes.func.isRequired,\r\n};\r\n\r\nconst mapStateToProps = ({ map, geodata, incidents }) => ({\r\n  lat: map.lat,\r\n  lng: map.lng,\r\n  zoom: map.zoom,\r\n  geodata: geodata.geodata,\r\n  incidents: incidents.data,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => bindActionCreators({\r\n  changeCoordinates,\r\n  changeZoom,\r\n  openIncident,\r\n}, dispatch);\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Map);\r\n","export const MAX_ZOOM = 17;\r\nexport const MIN_ZOOM = 5;\r\n","import { makeStyles } from '@material-ui/core/styles';\r\n\r\nexport default makeStyles(theme => ({\r\n  title: {\r\n    position: 'relative',\r\n    backgroundColor: '#eee',\r\n    borderBottom: '1px solid #cecece',\r\n  },\r\n  closeButton: {\r\n    position: 'absolute',\r\n    right: theme.spacing(1),\r\n    top: theme.spacing(1),\r\n  },\r\n  loadingText: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n  },\r\n  rotate: {\r\n    animation: '$rotate 1s infinite',\r\n  },\r\n  '@keyframes rotate': {\r\n    '0%': {\r\n      transform: 'rotate(0deg)',\r\n    },\r\n    '100%': {\r\n      transform: 'rotate(-360deg)',\r\n    },\r\n  },\r\n  actions: {\r\n    backgroundColor: '#eee',\r\n    borderTop: '1px solid #cecece',\r\n  },\r\n}));\r\n","import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { bindActionCreators } from 'redux';\r\nimport { connect, batch } from 'react-redux';\r\nimport {\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  IconButton,\r\n  Typography,\r\n  List,\r\n  ListItem,\r\n  ListItemText,\r\n  ListItemSecondaryAction,\r\n  Button,\r\n} from '@material-ui/core';\r\nimport {\r\n  Close as CloseIcon,\r\n  Loop as LoopIcon,\r\n  Check as CheckIcon,\r\n} from '@material-ui/icons';\r\nimport { setModal, changeCity } from '../../store/AC/cities';\r\nimport { changeCoordinates } from '../../store/AC/map';\r\nimport useStyles from './styles';\r\n\r\nfunction CitiesSelector(props) {\r\n  const [selectedCityId, setSelectedCityId] = useState(null);\r\n  const handleClick = id => {\r\n    const city = cities.find(city => city.id === id);\r\n    localStorage.setItem('selectedCity', id);\r\n    batch(() => {\r\n      changeCity(id);\r\n      setModal(false);\r\n      changeCoordinates(city.lat, city.lng);\r\n    });\r\n  };\r\n  const classes = useStyles();\r\n  const {\r\n    isOpen,\r\n    loading,\r\n    setModal,\r\n    cities,\r\n    changeCity,\r\n    changeCoordinates,\r\n  } = props;\r\n\r\n  return (\r\n    <Dialog\r\n      open={isOpen}\r\n      onClose={() => setModal(false)}\r\n      maxWidth=\"sm\"\r\n      fullWidth\r\n    >\r\n      <DialogTitle className={classes.title}>\r\n        Выберите город\r\n        <IconButton onClick={() => setModal(false)} className={classes.closeButton}>\r\n          <CloseIcon />\r\n        </IconButton>\r\n      </DialogTitle>\r\n      <DialogContent>\r\n        {\r\n          loading && (\r\n            <Typography variant=\"h6\" color=\"textSecondary\" className={classes.loadingText}>\r\n              Загрузка списка городов\r\n              <LoopIcon className={classes.rotate} />\r\n            </Typography>\r\n          )\r\n        }\r\n        {\r\n          !loading && (\r\n            <List component=\"nav\">\r\n              {\r\n                cities.map(city =>\r\n                  <ListItem\r\n                    button\r\n                    key={city.id}\r\n                    selected={city.id === selectedCityId}\r\n                    onClick={() => setSelectedCityId(city.id)}\r\n                  >\r\n                    <ListItemText>{city.name}</ListItemText>\r\n                    {\r\n                      city.id === selectedCityId &&\r\n                        <ListItemSecondaryAction>\r\n                          <IconButton>\r\n                            <CheckIcon />\r\n                          </IconButton>\r\n                        </ListItemSecondaryAction>\r\n                    }\r\n                  </ListItem>\r\n                )\r\n              }\r\n            </List>\r\n          )\r\n        }\r\n      </DialogContent>\r\n      <DialogActions className={classes.actions}>\r\n        <Button onClick={() => handleClick(selectedCityId)} disabled={selectedCityId === null}>Подтвердить</Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nCitiesSelector.propTypes = {\r\n  isOpen: PropTypes.bool.isRequired,\r\n  cities: PropTypes.array.isRequired,\r\n  loading: PropTypes.bool.isRequired,\r\n  error: PropTypes.bool.isRequired,\r\n  setModal: PropTypes.func.isRequired,\r\n  changeCity: PropTypes.func.isRequired,\r\n  changeCoordinates: PropTypes.func.isRequired,\r\n};\r\n\r\nconst mapStateToProps = ({ cities: {\r\n  isSelectorOpen,\r\n  data,\r\n  loading,\r\n  error,\r\n}}) => ({\r\n  isOpen: isSelectorOpen,\r\n  cities: data,\r\n  loading,\r\n  error\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => bindActionCreators({\r\n  setModal,\r\n  changeCity,\r\n  changeCoordinates,\r\n}, dispatch);\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CitiesSelector);\r\n","import { makeStyles } from '@material-ui/core/styles';\r\n\r\nexport default makeStyles(theme => ({\r\n  titleContainer: {\r\n    position: 'relative',\r\n    backgroundColor: '#eee',\r\n    borderBottom: '1px solid #cecece',\r\n  },\r\n  closeButton: {\r\n    position: 'absolute',\r\n    right: theme.spacing(1),\r\n    top: theme.spacing(1),\r\n  },\r\n  infoContainer: {\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    marginBottom: theme.spacing(1),\r\n  },\r\n  date: {\r\n    color: '#aaa',\r\n    cursor: 'pointer',\r\n    '&:hover': {\r\n      textDecoration: 'underline',\r\n    },\r\n  },\r\n  views: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    color: '#aaa',\r\n  },\r\n  viewsIcon: {\r\n    marginLeft: theme.spacing(1),\r\n  },\r\n  sourcesContainer: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    marginTop: theme.spacing(2),\r\n  },\r\n  sourceBorder: {\r\n    marginBottom: theme.spacing(1),\r\n    borderBottom: '1px solid #cecece',\r\n  }\r\n}));\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  IconButton,\r\n  Typography,\r\n  Link,\r\n  useTheme,\r\n  useMediaQuery,\r\n} from '@material-ui/core';\r\nimport {\r\n  Close as CloseIcon,\r\n  Visibility as VisibilityIcon,\r\n} from '@material-ui/icons';\r\nimport useStyles from './styles';\r\n\r\nfunction getDate(timestamp) {\r\n  const date = new Date(timestamp);\r\n  let day = date.getDate();\r\n  let month = date.getMonth() + 1;\r\n  const year = date.getFullYear();\r\n  let hours = date.getHours();\r\n  let minutes = date.getMinutes();\r\n\r\n  if (day < 10) day = '0' + day;\r\n  if (month < 10) month = '0' + month;\r\n  if (hours < 10) hours = '0' + hours;\r\n  if (minutes < 10) minutes = '0' + minutes;\r\n\r\n  return `${hours}:${minutes} ${day}.${month}.${year}`;\r\n}\r\n\r\nfunction Incident(props) {\r\n  const {\r\n    close,\r\n    incident: {\r\n      title,\r\n      text,\r\n      date: timestamp,\r\n      views,\r\n      sources,\r\n    },\r\n  } = props;\r\n\r\n  const classes = useStyles();\r\n  const date = getDate(timestamp);\r\n  const theme = useTheme();\r\n  const fullScreen = useMediaQuery(theme.breakpoints.down('sm'));\r\n\r\n  return (\r\n    <Dialog\r\n      open\r\n      onClose={close}\r\n      maxWidth=\"md\"\r\n      fullWidth\r\n      fullScreen={fullScreen}\r\n    >\r\n      <DialogTitle className={classes.titleContainer}>\r\n        {title}\r\n        <IconButton onClick={close} className={classes.closeButton}>\r\n          <CloseIcon />\r\n        </IconButton>\r\n      </DialogTitle>\r\n\r\n      <DialogContent>\r\n        <div className={classes.infoContainer}>\r\n          <Typography variant=\"body1\" className={classes.date}>{date}</Typography>\r\n          <Typography variant=\"body1\" className={classes.views}>{views} <VisibilityIcon className={classes.viewsIcon} /></Typography>\r\n        </div>\r\n        <Typography variant=\"body1\">{text}</Typography>\r\n        <div className={classes.sourcesContainer}>\r\n          <Typography variant=\"h6\">Источники:</Typography>\r\n          <div className={classes.sourceBorder} />\r\n          {\r\n            sources.map((source, i) => <Link key={i} href={source.link}>{source.name}</Link>)\r\n          }\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nIncident.propTypes = {\r\n  incident: PropTypes.shape({\r\n    id: PropTypes.number.isRequired,\r\n    title: PropTypes.string.isRequired,\r\n    text: PropTypes.string.isRequired,\r\n    type: PropTypes.number.isRequired,\r\n    views: PropTypes.number.isRequired,\r\n    date: PropTypes.number.isRequired,\r\n    city: PropTypes.string.isRequired,\r\n    coords: PropTypes.array.isRequired,\r\n    media: PropTypes.array.isRequired,\r\n    sources: PropTypes.array.isRequired,\r\n  }).isRequired,\r\n  close: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Incident;\r\n","import { makeStyles } from '@material-ui/core/styles';\r\n\r\nexport default makeStyles(theme => ({\r\n  root: {\r\n    display: 'flex',\r\n    height: '100%'\r\n  },\r\n  buttonUserPosition: {\r\n    position: 'absolute',\r\n    bottom: theme.spacing(3),\r\n    right: theme.spacing(3),\r\n    zIndex: 1000,\r\n  },\r\n  zoomButtonsContainer: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    position: 'absolute',\r\n    top: theme.spacing(1),\r\n    right: theme.spacing(1),\r\n    zIndex: 1000,\r\n  },\r\n  buttonZoomOut: {\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  [theme.breakpoints.up('md')]: {\r\n    zoomButtonsContainer: {\r\n      top: theme.spacing(3),\r\n      right: theme.spacing(3),\r\n    },\r\n    buttonZoomOut: {\r\n      marginTop: theme.spacing(1),\r\n    },\r\n  },\r\n}));\r\n","import {\r\n  FETCH_ALL_INCIDENTS,\r\n  FETCH_INCIDENT,\r\n  SET_LOADING,\r\n  SET_ERROR,\r\n  SET_INCIDENTS,\r\n} from '../actions/incidents';\r\n\r\nexport const fetchAllIncidents = id => ({ type: FETCH_ALL_INCIDENTS, id });\r\nexport const fetchIncident = id => ({ type: FETCH_INCIDENT, id });\r\nexport const setLoading = value => ({ type: SET_LOADING, value });\r\nexport const setError = error => ({ type: SET_ERROR, error });\r\nexport const setIncidents = incidents => ({ type: SET_INCIDENTS, incidents })","export const FETCH_ALL_INCIDENTS = 'FETCH_ALL_INCIDENTS';\r\nexport const FETCH_INCIDENT = 'FETCH_INCIDENT';\r\nexport const SET_LOADING = 'SET_LOADING';\r\nexport const SET_ERROR = 'SET_ERROR';\r\nexport const SET_INCIDENTS = 'SET_INCIDENTS';\r\n","import React, { useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport { Fab } from '@material-ui/core';\r\nimport {\r\n  NearMe as NearMeIcon,\r\n  ZoomIn as ZoomInIcon,\r\n  ZoomOut as ZoomOutIcon,\r\n} from '@material-ui/icons';\r\nimport Menu from '../../components/Menu';\r\nimport Map from '../../components/Map';\r\nimport CitiesSelector from '../../components/CitiesSelector';\r\nimport Incident from '../../components/Incident';\r\nimport useStyles from './styles';\r\nimport {\r\n  changeCoordinates,\r\n  incrementZoom,\r\n  decrementZoom,\r\n} from '../../store/AC/map';\r\nimport { fetchAllIncidents } from '../../store/AC/incidents';\r\nimport { closeIncident } from '../../store/AC/incident';\r\nimport { MAX_ZOOM, MIN_ZOOM } from '../../constants/map';\r\n\r\nfunction Main(props) {\r\n  const {\r\n    changeCoordinates,\r\n    geodata,\r\n    incrementZoom,\r\n    decrementZoom,\r\n    zoom,\r\n    fetchAllIncidents,\r\n    loading,\r\n    selectedCityid,\r\n    incident,\r\n    closeIncident,\r\n  } = props;\r\n  const classes = useStyles();\r\n\r\n  useEffect(() => {\r\n    if (loading) {\r\n      fetchAllIncidents(selectedCityid);\r\n    }\r\n  }, [loading, fetchAllIncidents, selectedCityid]);\r\n\r\n  const zoomIn = () => {\r\n    if (zoom === MAX_ZOOM) return;\r\n    incrementZoom();\r\n  };\r\n\r\n  const zoomOut = () => {\r\n    if (zoom === MIN_ZOOM) return;\r\n    decrementZoom();\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Menu />\r\n      <Map />\r\n      <CitiesSelector />\r\n      <Fab\r\n        color=\"primary\"\r\n        size=\"large\"\r\n        className={classes.buttonUserPosition}\r\n        onClick={() => changeCoordinates(geodata.coords.latitude, geodata.coords.longitude)}\r\n        disabled={geodata === null}\r\n      >\r\n        <NearMeIcon />\r\n      </Fab>\r\n      <div className={classes.zoomButtonsContainer}>\r\n        <Fab\r\n          size=\"large\"\r\n          onClick={zoomIn}\r\n        >\r\n          <ZoomInIcon />\r\n        </Fab>\r\n        <Fab\r\n          size=\"large\"\r\n          className={classes.buttonZoomOut}\r\n          onClick={zoomOut}\r\n        >\r\n          <ZoomOutIcon />\r\n        </Fab>\r\n      </div>\r\n      { incident && <Incident incident={incident} close={closeIncident} /> }\r\n    </div>\r\n  );\r\n}\r\n\r\nMain.propTypes = {\r\n  changeCoordinates: PropTypes.func.isRequired,\r\n  geodata: PropTypes.object,\r\n  incrementZoom: PropTypes.func.isRequired,\r\n  decrementZoom: PropTypes.func.isRequired,\r\n  zoom: PropTypes.number.isRequired,\r\n  fetchAllIncidents: PropTypes.func.isRequired,\r\n  loading: PropTypes.bool.isRequired,\r\n  selectedCityid: PropTypes.number.isRequired,\r\n  incident: PropTypes.object,\r\n  closeIncident: PropTypes.func.isRequired,\r\n};\r\n\r\nconst mapStateToProps = ({ geodata, map, incidents, cities, incident }) => ({\r\n  geodata: geodata.geodata,\r\n  zoom: map.zoom,\r\n  loading: incidents.isLoading,\r\n  selectedCityid: cities.selectedCity,\r\n  incident,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => bindActionCreators({\r\n  changeCoordinates,\r\n  incrementZoom,\r\n  decrementZoom,\r\n  fetchAllIncidents,\r\n  closeIncident,\r\n}, dispatch);\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Main);\r\n","import { SET_LOCATION, SET_LOCATION_ERROR } from '../actions/geodata';\r\n\r\nexport const setLocation = data => ({ type: SET_LOCATION, data });\r\nexport const setLocationError = error => ({ type: SET_LOCATION_ERROR, error });\r\n","export const SET_LOCATION = 'SET_LOCATION';\r\nexport const SET_LOCATION_ERROR = 'SET_LOCATION_ERROR';\r\n","import React, { Fragment } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport { CssBaseline } from '@material-ui/core';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport Main from '../Main';\r\nimport { setLocation, setLocationError } from '../../store/AC/geodata';\r\n\r\nfunction App(props) {\r\n  const { setLocation, setLocationError} = props;\r\n  \r\n  navigator.geolocation.getCurrentPosition(setLocation, setLocationError);\r\n\r\n  return (\r\n    <Fragment>\r\n      <CssBaseline />\r\n      <Switch>\r\n        <Route exact path=\"/\" component={Main} />\r\n      </Switch>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nApp.propTypes = {\r\n  setLocation: PropTypes.func.isRequired,\r\n  setLocationError: PropTypes.func.isRequired,\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => bindActionCreators({\r\n  setLocation,\r\n  setLocationError,\r\n}, dispatch);\r\n\r\nexport default connect(null, mapDispatchToProps)(App);\r\n","import {\r\n  ADD,\r\n  MODAL,\r\n  ERROR,\r\n  LOADING,\r\n  CHANGE_SELECTED_CITY,\r\n} from '../actions/cities';\r\n\r\nconst initialState = {\r\n  data: JSON.parse(localStorage.getItem('citiesList')) || [{ _id: '5e8f0f4f8883b725cc275bad', id: 1, title: 'novosibirsk', name: 'Новосибирск', lat: 55.0415, lng: 82.9346 }],\r\n  isSelectorOpen: false,\r\n  error: false,\r\n  loading: true,\r\n  selectedCity: +localStorage.getItem('selectedCity') || 1,\r\n};\r\n\r\nfunction cities(state = initialState, action) {\r\n  switch(action.type) {\r\n    case ADD:\r\n      return {...state, data: action.cities};\r\n    case MODAL:\r\n      return {...state, isSelectorOpen: action.isOpen};\r\n    case ERROR:\r\n      return {...state, error: action.error};\r\n    case LOADING:\r\n      return {...state, loading: action.loading};\r\n    case CHANGE_SELECTED_CITY:\r\n      return {...state, selectedCity: action.id};\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default cities;\r\n","import {\r\n  CHANGE_COORDINATES,\r\n  SET_ZOOM,\r\n  INCREMENT_ZOOM,\r\n  DECREMENT_ZOOM,\r\n} from '../actions/map';\r\n\r\nconst selectedCity = +JSON.parse(localStorage.getItem('selectedCity'));\r\nconst savedCities = JSON.parse(localStorage.getItem('citiesList'));\r\nlet lat;\r\nlet lng;\r\n\r\nif (selectedCity && savedCities) {\r\n  const city = savedCities.find(city => city.id === selectedCity);\r\n  lat = city.lat;\r\n  lng = city.lng;\r\n} else {\r\n  lat = 55.0415;\r\n  lng = 82.9346;\r\n}\r\n\r\nconst initialState = {\r\n  lat,\r\n  lng,\r\n  zoom: 13,\r\n};\r\n\r\nexport default function(state = initialState, action) {\r\n  switch(action.type) {\r\n    case CHANGE_COORDINATES:\r\n      return { ...state, lat: action.lat, lng: action.lng };\r\n    case SET_ZOOM:\r\n      return { ...state, zoom: action.zoom };\r\n    case INCREMENT_ZOOM:\r\n      return { ...state, zoom: ++state.zoom };\r\n    case DECREMENT_ZOOM:\r\n      return { ...state, zoom: --state.zoom };\r\n    default:\r\n      return state;\r\n  }\r\n}","import { SET_LOCATION, SET_LOCATION_ERROR } from '../actions/geodata';\r\n\r\nconst initialState = {\r\n  geodata: null,\r\n  error: false,\r\n};\r\n\r\nexport default function(state = initialState, action) {\r\n  switch (action.type) {\r\n    case SET_LOCATION:\r\n      return { ...state, geodata: action.data };\r\n    case SET_LOCATION_ERROR:\r\n      return { ...state, error: true };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import {\r\n  SET_LOADING,\r\n  SET_ERROR,\r\n  SET_INCIDENTS,\r\n} from '../actions/incidents';\r\n\r\nconst initialState = {\r\n  isLoading: true,\r\n  data: [],\r\n  error: false,\r\n};\r\n\r\nexport default function(state = initialState, action) {\r\n  switch(action.type) {\r\n    case SET_INCIDENTS:\r\n      return { ...state, data: action.incidents };\r\n    case SET_LOADING:\r\n      return { ...state, isLoading: false };\r\n    case SET_ERROR:\r\n      return { ...state, error: action.error };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { combineReducers } from 'redux';\r\nimport cities from './cities';\r\nimport map from './map';\r\nimport geodata from './geodata';\r\nimport incidents from './incidents';\r\nimport incident from './incident';\r\n\r\nexport default combineReducers({\r\n  cities,\r\n  map,\r\n  geodata,\r\n  incidents,\r\n  incident,\r\n});\r\n","import {\r\n  OPEN_INCIDENT,\r\n  CLOSE_INCIDENT,\r\n} from '../actions/incident';\r\n\r\nconst initialState = null;\r\n\r\nexport default function(state = initialState, action) {\r\n  switch(action.type) {\r\n    case OPEN_INCIDENT:\r\n      return { ...action.incident };\r\n    case CLOSE_INCIDENT:\r\n      return null;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { takeLatest, call, put } from 'redux-saga/effects';\r\nimport axios from 'axios';\r\nimport { FETCH_CITIES, CHANGE_CITY } from '../actions/cities';\r\nimport { setCities, setError, setLoading, changeSelectedCity } from '../AC/cities';\r\nimport { fetchAllIncidents } from '../AC/incidents';\r\n\r\nfunction* fetchCities() {\r\n  try {\r\n    const { data } = yield call(axios.get, '/api/cities/');\r\n    localStorage.setItem('citiesList', JSON.stringify(data));\r\n    yield put(setCities(data));\r\n    yield put(setError(false));\r\n    yield put(setLoading(false));\r\n  } catch(error) {\r\n    console.error(error.message);\r\n    yield put(setError(true));\r\n  }\r\n}\r\n\r\nfunction* changeCity(props) {\r\n  try {\r\n    const { id } = props;\r\n    yield put(fetchAllIncidents(id));\r\n    yield put(changeSelectedCity(id));\r\n  } catch(error) {\r\n    console.error(error.message);\r\n  }\r\n}\r\n\r\nexport default function* () {\r\n  yield takeLatest(FETCH_CITIES, fetchCities);\r\n  yield takeLatest(CHANGE_CITY, changeCity);\r\n}\r\n","import { takeLatest, call, put, select } from 'redux-saga/effects';\r\nimport axios from 'axios';\r\nimport { FETCH_ALL_INCIDENTS } from '../actions/incidents';\r\nimport { setError, setLoading, setIncidents } from '../AC/incidents';\r\n\r\nfunction* fetchIncidents(props) {\r\n  const cityId = props.id;\r\n  try {\r\n    const { cities } = yield select(({ cities }) => ({\r\n      cities: cities.data,\r\n    }));\r\n    const { title: city } = cities.find(city => city.id === cityId);\r\n    const { data } = yield call(axios.get, `/api/incidents/${city}`);\r\n    \r\n    yield put(setError(false));\r\n    yield put(setLoading(false));\r\n    yield put(setIncidents(data));\r\n  } catch(e) {\r\n    console.error(e.message);\r\n    yield put(setError(true));\r\n  }\r\n}\r\n\r\nexport default function* () {\r\n  yield takeLatest(FETCH_ALL_INCIDENTS, fetchIncidents);\r\n};\r\n","import { all } from 'redux-saga/effects';\r\nimport cities from './cities';\r\nimport incidents from './incidents';\r\n\r\nfunction* rootSaga() {\r\n  yield all([\r\n    cities(),\r\n    incidents(),\r\n  ]);\r\n}\r\n\r\nexport default rootSaga;\r\n","import { createStore, applyMiddleware } from 'redux';\r\nimport createSagaMiddleware from 'redux-saga';\r\nimport rootReducer from './reducers';\r\nimport rootSaga from './sagas';\r\n\r\nconst sagaMiddleware = createSagaMiddleware();\r\n\r\nconst store = createStore(rootReducer, applyMiddleware(sagaMiddleware));\r\nwindow.getState = store.getState;\r\n\r\nsagaMiddleware.run(rootSaga);\r\n\r\nexport default store;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport { Provider } from 'react-redux';\r\nimport App from './containers/App';\r\nimport store from './store';\r\nimport './styles.css';\r\n\r\nReactDOM.render(\r\n  <BrowserRouter>\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>\r\n  </BrowserRouter>,\r\n  document.getElementById('root')\r\n);\r\n","module.exports = __webpack_public_path__ + \"static/media/logo_dark.6ea33164.svg\";","module.exports = __webpack_public_path__ + \"static/media/novosibirsk.3223fede.jpg\";","module.exports = __webpack_public_path__ + \"static/media/krasnoyarsk.aaf9cd5c.jpg\";","module.exports = __webpack_public_path__ + \"static/media/novosibirsk.f2328259.svg\";","module.exports = __webpack_public_path__ + \"static/media/krasnoyarsk.0bba5569.svg\";","module.exports = __webpack_public_path__ + \"static/media/user.ed058a81.svg\";","module.exports = __webpack_public_path__ + \"static/media/car_theft.f15135e1.svg\";","module.exports = __webpack_public_path__ + \"static/media/fire.4faaaf86.svg\";","module.exports = __webpack_public_path__ + \"static/media/accident.75476a82.svg\";","module.exports = __webpack_public_path__ + \"static/media/animal.80e28ec9.svg\";","module.exports = __webpack_public_path__ + \"static/media/violence.4e158945.svg\";","module.exports = __webpack_public_path__ + \"static/media/bad_services.78eacfc8.svg\";","module.exports = __webpack_public_path__ + \"static/media/death.25eac115.svg\";","module.exports = __webpack_public_path__ + \"static/media/dtp.741b1766.svg\";"],"sourceRoot":""}